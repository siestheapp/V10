<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>Freestyle â€” Your Closet</title>
<link rel="preconnect" href="https://fonts.googleapis.com">
<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
<link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700;800&display=swap" rel="stylesheet">
<!-- Include the data model -->
<script src="./mockup-data.js"></script>
<style>
:root{
  /* Dark theme colors from closet-gallery.html */
  --ink-900:#1A1F26; /* primary text / dark bg - lighter */
  --ink-700:#232A32; /* dark surfaces, nav - lighter */
  --ink-600:#2A3642; /* button hover states - lighter */
  --ink-500:#3A4652; /* subhead, muted text - lighter */
  --ink-400:#4A5561; /* lighter borders */
  --ink-300:#6A7683; /* secondary text, captions */

  --canvas-0:#F7F9FB; /* app background (light) */
  --canvas-50:#EFF3F6; /* cards/sections (light) */
  --canvas-100:#E9EEF1; /* borders/dividers (light) */

  /* --- Brand & Accents --- */
  --petrol-600:#009090; /* pressed/active */
  --petrol-500:#00A3A3; /* primary brand / CTA */
  --petrol-400:#16B5B5; /* hover/highlight */
  --petrol-100:#E0F7F7; /* light pills/backgrounds */

  --mint-400:#A6FFCB; /* sub-accent */
  --ice-300:#7FE1FF;  /* cool complement */
  --coral-500:#FF6B5A; /* alerts / "tight" state */

  /* --- Gradient --- */
  --brand-sheen: linear-gradient(135deg,#00A3A3 0%,#7FE1FF 50%,#A6FFCB 100%);

  /* --- Radii --- */
  --radius-card:16px;
  --radius-btn:12px;
  --radius-pill:999px;
  --radius-xl:22px;

  /* --- Spacing scale --- */
  --space-4:4px;
  --space-6:6px;
  --space-8:8px;
  --space-10:10px;
  --space-12:12px;
  --space-14:14px;
  --space-16:16px;
  --space-20:20px;
  --space-24:24px;
  --space-32:32px;

  /* --- Shadows --- */
  --elev-0: 0 1px 2px rgba(0,0,0,.06);        /* subtle */
  --elev-1: 0 8px 24px rgba(11,15,20,.08);    /* card */
  --elev-2: 0 20px 60px rgba(0,0,0,.18);      /* modal/cta */

  /* Dark theme mappings for app content only */
  --bg: var(--ink-900);
  --ink: #FFFFFF;
  --muted: var(--ink-300);
  --accent: var(--petrol-500);
  --card: var(--ink-700);
  --track: var(--ink-500);
  --shadow: var(--elev-1);
  --border: rgba(255,255,255,.08);
}
*{margin:0;padding:0;box-sizing:border-box}
body{font-family:Inter,system-ui,-apple-system,"Segoe UI",Roboto,Helvetica,Arial;background:linear-gradient(180deg, #FFFFFF 0%, #F8F9FA 100%);color:var(--ink);
  min-height:100vh;display:flex;align-items:center;justify-content:center;padding:0;position:relative}
body::before{content:"2";position:fixed;top:20px;left:20px;font-size:24px;font-weight:700;color:#666;z-index:1000;pointer-events:none}

/* iPhone 15 Pro Max Frame (Photorealistic Titanium) */
.phone{width:430px;height:932px;border-radius:65px;background:linear-gradient(135deg, #E8E8E8 0%, #D0D0D0 20%, #B8B8B8 40%, #A8A8A8 60%, #989898 80%, #888888 100%);padding:6px;box-shadow:0 30px 100px rgba(0,0,0,0.5), 0 15px 40px rgba(0,0,0,0.3), 0 5px 15px rgba(0,0,0,0.2), inset 0 3px 6px rgba(255,255,255,0.5), inset 0 -2px 4px rgba(0,0,0,0.3);position:relative}
.phone::before{content:"";position:absolute;top:0;left:0;right:0;bottom:0;border-radius:65px;background:linear-gradient(45deg, rgba(255,255,255,0.15) 0%, transparent 30%, rgba(0,0,0,0.05) 70%, rgba(255,255,255,0.05) 100%);pointer-events:none}
.phone::after{content:"";position:absolute;top:2px;left:2px;right:2px;bottom:2px;border-radius:63px;background:linear-gradient(135deg, rgba(255,255,255,0.1) 0%, transparent 50%, rgba(0,0,0,0.1) 100%);pointer-events:none}
.screen{height:100%;background:var(--ink-900);border-radius:59px;overflow:hidden;position:relative;display:flex;flex-direction:column;border:1px solid rgba(0,0,0,0.2);box-shadow:inset 0 0 0 5px #000, inset 0 1px 2px rgba(255,255,255,.08), inset 0 -1px 2px rgba(0,0,0,.35)}

/* Dynamic Island */
.island{position:absolute;top:12px;left:50%;transform:translateX(-50%);width:126px;height:37px;background:#000;border-radius:19px;z-index:2}

/* Action Button (iPhone 15 Pro Max) */
.action-button{position:absolute;left:-3px;top:120px;width:10px;height:62px;background:linear-gradient(90deg, #A8A8A8 0%, #C0C0C0 30%, #D0D0D0 50%, #C0C0C0 70%, #A8A8A8 100%);border-radius:0 5px 5px 0;box-shadow:inset 2px 0 3px rgba(0,0,0,0.4), inset -1px 0 2px rgba(255,255,255,0.3), 1px 0 2px rgba(0,0,0,0.2)}

/* Volume buttons (left side) */
.btn-volume{position:absolute;left:-3px;width:10px;background:linear-gradient(90deg, #A8A8A8 0%, #C0C0C0 30%, #D0D0D0 50%, #C0C0C0 70%, #A8A8A8 100%);border-radius:0 5px 5px 0;box-shadow:inset 2px 0 3px rgba(0,0,0,0.4), inset -1px 0 2px rgba(255,255,255,0.3), 1px 0 2px rgba(0,0,0,0.2)}
.btn-volume.up{top:210px;height:70px}
.btn-volume.down{top:298px;height:70px}

/* Power button (right side) */
.btn-power{position:absolute;right:-3px;top:270px;width:10px;height:110px;background:linear-gradient(270deg, #A8A8A8 0%, #C0C0C0 30%, #D0D0D0 50%, #C0C0C0 70%, #A8A8A8 100%);border-radius:5px 0 0 5px;box-shadow:inset -2px 0 3px rgba(0,0,0,0.4), inset 1px 0 2px rgba(255,255,255,0.3), -1px 0 2px rgba(0,0,0,0.2)}

/* Antenna bands */
.antenna{position:absolute;width:16px;height:2px;background:linear-gradient(90deg, rgba(255,255,255,.5), rgba(0,0,0,.15));opacity:.6;border-radius:2px}
.antenna.lt{left:6px;top:86px;transform:rotate(90deg)}
.antenna.lb{left:6px;bottom:86px;transform:rotate(90deg)}
.antenna.rt{right:6px;top:140px;transform:rotate(90deg)}
.antenna.rb{right:6px;bottom:140px;transform:rotate(90deg)}

/* Dynamic Island subtle highlight */
.island::before{content:"";position:absolute;inset:2px;border-radius:17px;background:linear-gradient(180deg, rgba(255,255,255,.12), rgba(255,255,255,0));opacity:.35}

/* Status Bar */
.status{height:54px;margin-top:8px;display:flex;align-items:center;justify-content:space-between;padding:0 24px;font-weight:600;color:#fff;font-size:17px;letter-spacing:-.02em}
.status .right{display:flex;align-items:center;gap:6px}
.status .right img{height:13px;width:auto;display:block;filter:invert(1)}

/* App Content */
.header{padding:var(--space-4) var(--space-24) var(--space-4);display:flex;justify-content:space-between;align-items:center}
.logo{font-weight:600;font-size:32px;letter-spacing:-.01em;background:var(--brand-sheen);
  -webkit-background-clip:text;background-clip:text;-webkit-text-fill-color:transparent}

/* Filters - Refined with icon-only view toggle */
.filters{position:sticky;top:54px;z-index:4;background:var(--ink-900);padding:var(--space-10) var(--space-24);border-bottom:1px solid rgba(255,255,255,.08)}
.filters-content{display:flex;align-items:center;gap:var(--space-12);justify-content:space-between}
.chips{display:flex;gap:var(--space-6);overflow-x:auto;-webkit-overflow-scrolling:touch;scrollbar-width:none;flex:1}
.chips::-webkit-scrollbar{display:none}
.chip{background:transparent;color:var(--ink-300);border-radius:var(--radius-pill);padding:var(--space-8) var(--space-14);font-size:13px;font-weight:500;white-space:nowrap;transition:all 0.15s ease;cursor:pointer;border:1px solid transparent}
.chip.active{background:rgba(22,181,181,.15);color:var(--petrol-400);font-weight:600;border-color:var(--petrol-400)}
.chip:not(.active):hover{background:rgba(255,255,255,.05);color:#fff}

/* View toggle - Icon only for space efficiency */
.view-toggle{display:flex;background:var(--ink-700);border-radius:var(--radius-pill);padding:2px;border:1px solid var(--ink-500)}
.switch{width:32px;height:28px;border-radius:var(--radius-pill);background:transparent;border:none;color:var(--ink-300);cursor:pointer;transition:all 0.15s ease;display:flex;align-items:center;justify-content:center;padding:0}
.switch svg{width:16px;height:16px}
.switch.active{background:var(--ink-500);color:var(--petrol-400)}
.switch:not(.active):hover{color:#fff}

/* Content */
.content{flex:1;overflow:auto;padding:0 var(--space-24) 96px}
.title{font:700 28px/1.2 Inter;margin:var(--space-16) 0 var(--space-16);color:#fff;letter-spacing:-.01em}

/* Item cards - Agency-level refinement */
.grid{display:grid;grid-template-columns:repeat(2,1fr);gap:var(--space-10)}
.list{display:grid;grid-template-columns:1fr;gap:var(--space-12)}

.card{position:relative;overflow:hidden;border-radius:var(--radius-card);background:var(--ink-700);transition:all 0.3s cubic-bezier(0.4, 0, 0.2, 1);cursor:pointer;border:1px solid rgba(255,255,255,.04)}
.card:hover{transform:translateY(-4px);box-shadow:0 20px 40px rgba(0,0,0,.3), 0 0 0 1px rgba(255,255,255,.08)}
.card:active{transform:translateY(-2px)}
.img{width:100%;height:240px;object-fit:cover;object-position:center;transition:transform 0.6s cubic-bezier(0.4, 0, 0.2, 1)}
.card:hover .img{transform:scale(1.04)}
.img.tall{height:280px}

/* Gradient overlay - More subtle and sophisticated */
.overlay{position:absolute;inset:0;background:linear-gradient(180deg,transparent 50%,rgba(11,15,20,.4) 75%,rgba(11,15,20,.9) 100%);opacity:0;transition:opacity 0.3s ease;pointer-events:none}
.card:hover .overlay{opacity:1}

/* Info section - Cleaner positioning */
.info{position:absolute;bottom:0;left:0;right:0;padding:var(--space-14) var(--space-14) var(--space-16);background:linear-gradient(180deg,transparent,rgba(11,15,20,.95));transform:translateY(4px);transition:transform 0.3s cubic-bezier(0.4, 0, 0.2, 1)}
.card:hover .info{transform:translateY(0)}
.brand{font:500 11px/1 Inter;letter-spacing:.08em;color:var(--canvas-0);opacity:0.95}
.name{font:600 14px/1.3 Inter;margin-top:4px;color:#fff;letter-spacing:-.01em}

/* Size badge - Refined design */
.size{position:absolute;top:var(--space-12);left:var(--space-12);padding:var(--space-6) var(--space-10);border-radius:var(--radius-btn);background:rgba(18,26,34,.75);backdrop-filter:blur(12px);-webkit-backdrop-filter:blur(12px);color:#fff;font:500 11px/1 Inter;border:1px solid rgba(255,255,255,.12);letter-spacing:.02em}

/* Tab bar */
.tabs{position:absolute;left:0;right:0;bottom:0;height:83px;background:rgba(11,15,20,.75);border-top:1px solid rgba(255,255,255,.08);
  backdrop-filter:blur(16px);-webkit-backdrop-filter:blur(16px);
  display:flex;justify-content:space-around;align-items:flex-start;padding-top:8px;padding-bottom:34px}
.tab{display:flex;flex-direction:column;align-items:center;gap:6px;text-decoration:none;color:var(--ink-300);font-size:11px;font-weight:500;transition:color 0.2s ease}
.tab.active{color:var(--petrol-600);font-weight:600}
.ico{width:28px;height:28px;display:block}

/* Modal preview - Agency-level design */
.modal{position:fixed;inset:0;background:rgba(0,0,0,.85);display:none;align-items:center;justify-content:center;z-index:50;backdrop-filter:blur(20px);-webkit-backdrop-filter:blur(20px)}
.modal.open{display:flex;animation:fadeIn 0.2s ease}
@keyframes fadeIn{from{opacity:0}to{opacity:1}}

.sheet{width:92%;max-width:400px;background:var(--ink-700);border-radius:var(--radius-xl);overflow:hidden;box-shadow:0 50px 100px rgba(0,0,0,.5), 0 0 0 1px rgba(255,255,255,.05);animation:slideUp 0.3s cubic-bezier(0.34, 1.56, 0.64, 1)}
@keyframes slideUp{from{transform:translateY(20px);opacity:0}to{transform:translateY(0);opacity:1}}

.sheet .hero{position:relative;height:360px;overflow:hidden}
.sheet img{width:100%;height:100%;object-fit:cover;object-position:center}
.sheet .close-x{position:absolute;top:var(--space-12);right:var(--space-12);width:32px;height:32px;border-radius:50%;background:rgba(18,26,34,.75);backdrop-filter:blur(12px);border:1px solid rgba(255,255,255,.1);display:flex;align-items:center;justify-content:center;cursor:pointer;transition:all 0.2s ease}
.sheet .close-x:hover{background:rgba(18,26,34,.9);transform:scale(1.1)}
.sheet .close-x svg{width:16px;height:16px;color:#fff}

.sheet .body{padding:var(--space-20) var(--space-24) var(--space-24);color:#fff}
.sheet .meta-row{display:flex;align-items:baseline;justify-content:space-between;margin-bottom:var(--space-16)}
.sheet h3{font:700 22px/1.2 Inter;color:#fff;letter-spacing:-.02em}
.meta{color:var(--ink-300);font-size:13px;font-weight:500;letter-spacing:.02em}
.sheet .size-badge{display:inline-flex;align-items:center;padding:var(--space-6) var(--space-12);border-radius:var(--radius-pill);background:rgba(22,181,181,.15);color:var(--petrol-400);font:600 13px/1 Inter;border:1px solid var(--petrol-400)}

.why{margin-top:var(--space-16);background:rgba(255,255,255,.03);border:1px solid rgba(255,255,255,.08);border-radius:var(--radius-card);padding:var(--space-16);color:var(--ink-300);font-size:14px;line-height:1.5}
.why strong{color:#fff;font-weight:600}

.cta{margin-top:var(--space-20);display:flex;align-items:center;justify-content:center}
.btn-primary{display:inline-flex;align-items:center;justify-content:center;gap:var(--space-8);padding:var(--space-16) var(--space-32);border-radius:var(--radius-btn);font:700 16px/1 Inter;cursor:pointer;transition:all 0.2s ease;letter-spacing:-.01em;color:#fff;border:none;background:linear-gradient(180deg, rgba(255,255,255,.08) 0%, rgba(255,255,255,0) 8%), var(--brand-sheen);box-shadow:0 10px 24px rgba(0,163,163,.25);width:100%}
.btn-primary:hover{transform:translateY(-1px);box-shadow:0 12px 28px rgba(0,163,163,.35)}
.btn-primary:active{transform:scale(.98)}
</style>
</head>
<body>
  <div class="phone">
    <div class="action-button"></div>
    <div class="btn-volume up"></div>
    <div class="btn-volume down"></div>
    <div class="btn-power"></div>
    <div class="antenna lt"></div>
    <div class="antenna lb"></div>
    <div class="antenna rt"></div>
    <div class="antenna rb"></div>
    <div class="screen" data-view="grid">
      <div class="island"></div>
      <div class="status">
        <div>9:41</div>
        <div class="right">
          <img src="Cellular Connection.svg" alt="cell"/>
          <img src="Wifi.svg" alt="wifi"/>
          <img src="Battery.svg" alt="battery"/>
        </div>
      </div>

      <div class="header">
        <div class="logo">Freestyle</div>
      </div>

      <div class="filters">
        <div class="filters-content">
          <div class="chips" id="chips">
            <button class="chip active" data-filter="all">All</button>
            <button class="chip" data-filter="top">Tops</button>
            <button class="chip" data-filter="bottom">Bottoms</button>
            <button class="chip" data-filter="dress">Dresses</button>
          </div>
          <div class="view-toggle">
            <button class="switch" id="listBtn" title="List view">
              <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                <line x1="8" y1="6" x2="21" y2="6"></line>
                <line x1="8" y1="12" x2="21" y2="12"></line>
                <line x1="8" y1="18" x2="21" y2="18"></line>
                <line x1="3" y1="6" x2="3.01" y2="6"></line>
                <line x1="3" y1="12" x2="3.01" y2="12"></line>
                <line x1="3" y1="18" x2="3.01" y2="18"></line>
              </svg>
            </button>
            <button class="switch active" id="gridBtn" title="Grid view">
              <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                <rect x="3" y="3" width="7" height="7"></rect>
                <rect x="14" y="3" width="7" height="7"></rect>
                <rect x="14" y="14" width="7" height="7"></rect>
                <rect x="3" y="14" width="7" height="7"></rect>
              </svg>
            </button>
          </div>
        </div>
      </div>

      <div class="content">
        <h1 class="title">Your Closet</h1>
        <div id="items" class="grid">
          <!-- Items will be dynamically generated from mockup data -->
        </div>
      </div>

      <div class="tabs">
        <a class="tab" href="#"><svg class="ico" viewBox="0 0 256 256" aria-hidden="true"><path fill="currentColor" d="M241,150.65s0,0,0-.05a51.33,51.33,0,0,0-2.53-5.9L196.93,50.18a12,12,0,0,0-2.5-3.65,36,36,0,0,0-50.92,0A12,12,0,0,0,140,55V76H116V55a12,12,0,0,0-3.51-8.48,36,36,0,0,0-50.92,0,12,12,0,0,0-2.5,3.65L17.53,144.7A51.33,51.33,0,0,0,15,150.6s0,0,0,.05A52,52,0,1,0,116,168V100h24v68a52,52,0,1,0,101-17.35ZM80,62.28a12,12,0,0,1,12-1.22v63.15a51.9,51.9,0,0,0-35.9-7.62ZM64,196a28,28,0,1,1,28-28A28,28,0,0,1,64,196ZM164,61.06a12.06,12.06,0,0,1,12,1.22l23.87,54.31a51.9,51.9,0,0,0-35.9,7.62ZM192,196a28,28,0,1,1,28-28A28,28,0,0,1,192,196Z"/></svg><span>Find</span></a>
        <a class="tab" href="#"><svg class="ico" viewBox="0 0 256 256" aria-hidden="true"><path fill="currentColor" d="M225.24,174.74a12,12,0,0,1-1.58,16.89C205.49,206.71,189.06,212,174.15,212c-19.76,0-36.86-9.29-51.88-17.44-25.06-13.62-44.86-24.37-74.61.3a12,12,0,1,1-15.32-18.48c42.25-35,75-17.23,101.39-2.92,25.06,13.61,44.86,24.37,74.61-.3A12,12,0,0,1,225.24,174.74Zm-16.9-57.59c-29.75,24.67-49.55,13.91-74.61.3-26.35-14.3-59.14-32.11-101.39,2.92a12,12,0,0,0,15.32,18.48c29.75-24.67,49.55-13.92,74.61-.3,15,8.15,32.12,17.44,51.88,17.44,14.91,0,31.34-5.29,49.51-20.36a12,12,0,0,0-15.32-18.48ZM47.66,82.84c29.75-24.67,49.55-13.92,74.61-.3,15,8.15,32.12,17.44,51.88,17.44,14.91,0,31.34-5.29,49.51-20.36a12,12,0,0,0-15.32-18.48c-29.75,24.67-49.55,13.92-74.61.3-26.35-14.3-59.14-32.11-101.39,2.93A12,12,0,1,0,47.66,82.84Z"/></svg><span>Feed</span></a>
        <a class="tab active" href="#"><svg class="ico" viewBox="0 0 256 256" aria-hidden="true"><path fill="currentColor" d="M244,168,148,96l19.2-14.4A12,12,0,0,0,172,72a44,44,0,0,0-87.66-5.48,12,12,0,1,0,23.82,3,20,20,0,0,1,39.09-2.92L121,86.24c-.15.1-.29.21-.43.32L12,168a20,20,0,0,0,12,36H232a20,20,0,0,0,12-36ZM36,180l92-69,92,69Z"/></svg><span>Closet</span></a>
        <a class="tab" href="#"><svg class="ico" viewBox="0 0 256 256" aria-hidden="true"><path fill="currentColor" d="M234.38,210a123.36,123.36,0,0,0-60.78-53.23,76,76,0,1,0-91.2,0A123.36,123.36,0,0,0,21.62,210a12,12,0,1,0,20.77,12c18.12-31.32,50.12-50,85.61-50s67.49,18.69,85.61,50a12,12,0,0,0,20.77-12ZM76,96a52,52,0,1,1,52,52A52.06,52.06,0,0,1,76,96Z"/></svg><span>Profile</span></a>
      </div>
    </div>
  </div>

  <!-- Modal preview -->
  <div id="modal" class="modal" role="dialog" aria-modal="true" aria-label="Garment details">
    <div class="sheet">
      <div class="hero">
        <img id="mImg" alt="">
        <button class="close-x" id="closeBtn" aria-label="Close">
          <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
            <line x1="18" y1="6" x2="6" y2="18"></line>
            <line x1="6" y1="6" x2="18" y2="18"></line>
          </svg>
        </button>
      </div>
      <div class="body">
        <div class="meta-row">
          <div>
            <h3 id="mTitle">Title</h3>
            <div id="mBrand" class="meta">Brand</div>
          </div>
          <span id="mSize" class="size-badge">Size</span>
        </div>
        <div class="why">
          <strong>Fit details:</strong>
          <div id="mWhy">We'll compare this to similar items in your closet and show chest/waist/hips context here.</div>
        </div>
        <div class="cta">
          <button class="btn-primary">
            View full details
            <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
              <line x1="5" y1="12" x2="19" y2="12"></line>
              <polyline points="12 5 19 12 12 19"></polyline>
            </svg>
          </button>
        </div>
      </div>
    </div>
  </div>

<script>
// Generate closet item cards from data
function generateClosetCard(item) {
  return `
    <article class="card" data-category="${item.category}" data-name="${item.name}" data-size="${item.size}" data-id="${item.id}">
      <img class="img ${item.category === 'dress' ? 'tall' : ''}" src="${item.image}" alt="${item.name}">
      <span class="size">${item.size}</span>
      <div class="overlay"></div>
      <div class="info">
        <div class="brand">${item.brand.toUpperCase()}</div>
        <div class="name">${item.name}</div>
      </div>
    </article>
  `;
}

// Initialize the closet
document.addEventListener('DOMContentLoaded', function() {
  const items = document.getElementById('items');
  
  // Generate cards for each closet item
  MOCKUP_DATA.closet.forEach(item => {
    items.innerHTML += generateClosetCard(item);
  });
  
  console.log('Closet initialized with', MOCKUP_DATA.closet.length, 'items');
});

// View toggle (list vs grid)
const screen = document.querySelector('.screen');
const items = document.getElementById('items');
const listBtn = document.getElementById('listBtn');
const gridBtn = document.getElementById('gridBtn');

listBtn?.addEventListener('click',()=>{
  listBtn.classList.add('active');
  gridBtn.classList.remove('active');
  items.className='list';
  try{ parent.postMessage({ type:'mock_button_click', key:'closet-view-list' }, '*'); }catch(err){}
});

gridBtn?.addEventListener('click',()=>{
  gridBtn.classList.add('active');
  listBtn.classList.remove('active');
  items.className='grid';
  try{ parent.postMessage({ type:'mock_button_click', key:'closet-view-grid' }, '*'); }catch(err){}
});

// Filter chips
const chips = document.getElementById('chips');
chips?.addEventListener('click', (e)=>{
  const btn = e.target.closest('.chip');
  if(!btn) return;
  chips.querySelectorAll('.chip').forEach(c=>c.classList.remove('active'));
  btn.classList.add('active');
  const filter = btn.dataset.filter;
  document.querySelectorAll('#items .card').forEach(card=>{
    const match = filter==='all' || card.dataset.category===filter;
    card.style.display = match ? '' : 'none';
  });
  try{ parent.postMessage({ type:'mock_button_click', key:`closet-filter-${filter}` }, '*'); }catch(err){}
});

// Modal preview
const modal = document.getElementById('modal');
const mImg = document.getElementById('mImg');
const mTitle = document.getElementById('mTitle');
const mBrand = document.getElementById('mBrand');
const mSize = document.getElementById('mSize');
const mWhy = document.getElementById('mWhy');
const closeBtn = document.getElementById('closeBtn');

document.getElementById('items').addEventListener('click',(e)=>{
  const card = e.target.closest('.card');
  if(!card) return;
  
  const itemId = card.dataset.id;
  const item = MOCKUP_DATA.closet.find(i => i.id === itemId);
  
  const imgEl = card.querySelector('img');
  mImg.src = imgEl.src; 
  mImg.alt = imgEl.alt;
  mTitle.textContent = card.dataset.name;
  mBrand.textContent = card.querySelector('.brand').textContent;
  mSize.textContent = card.dataset.size;
  
  // Generate fit explanation based on item data
  if (item) {
    const measurements = item.measurements;
    mWhy.textContent = `Perfect fit: Bust ${measurements.bust}", Waist ${measurements.waist}", Hips ${measurements.hips}". This item helps us understand your fit preferences for similar styles.`;
  } else {
    mWhy.textContent = "This item helps us understand your fit preferences for similar styles.";
  }
  
  modal.classList.add('open');
  try{ parent.postMessage({ type:'mock_button_click', key:`closet-item-${itemId}` }, '*'); }catch(err){}
});

modal.addEventListener('click',(e)=>{ 
  if(e.target===modal) modal.classList.remove('open'); 
});

closeBtn.addEventListener('click',()=> modal.classList.remove('open'));
</script>

</body>
</html>