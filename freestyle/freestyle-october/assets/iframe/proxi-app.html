<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>Proxi — Your Fit Feed</title>
<link rel="preconnect" href="https://fonts.googleapis.com">
<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
<link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700;800&display=swap" rel="stylesheet">
<style>
:root{
  /* Neutrals */
  --bg:#FFFFFF; --ink:#262626; --muted:#7A7A80;
  /* Proxi brand */
  --petrol-600:#009090; --petrol-500:#00A3A3; --petrol-400:#16B5B5; --petrol-100:#E0F7F7;
  --mint-400:#A6FFCB; --ice-300:#7FE1FF;
  /* Adaptive CTA ramp (deepened default for contrast) */
  --cta-start:#008888; --cta-mid:#3ECFD5; --cta-end:#9BFFCF;
  --card:#FFFFFF; --track:#ECECEC; --shadow:0 10px 30px rgba(0,0,0,.06);
}
*{margin:0;padding:0;box-sizing:border-box}
html{background:#f5f5f5}
body{font-family:Inter,system-ui,-apple-system,"Segoe UI",Roboto,Helvetica,Arial;background:#f5f5f5;color:var(--ink);
  min-height:100vh;display:flex;align-items:center;justify-content:center;padding:0;position:relative}
/* Warm page glow behind app content */
body::before{
  content:""; position:fixed; inset:-20% -10% auto -10%; height:60vh; pointer-events:none;
  background:
    radial-gradient(800px 350px at 50% -120px, rgba(0,163,163,.08), transparent 60%),
    radial-gradient(1200px 500px at 10% -80px, rgba(166,255,203,.08), transparent 65%);
  filter:saturate(105%);
}

/* iPhone Frame */
.phone{width:430px;height:932px;border-radius:55px;background:transparent;border:2px solid #000;position:relative;box-shadow:none}
.screen{position:absolute;inset:2px;background:#fff;border-radius:53px;overflow:hidden;display:flex;flex-direction:column}
.screen,
.phone,
.device,
.feed-viewport{
  overflow-x:hidden;
}

/* Dynamic Island */
.island{position:absolute;top:11px;left:50%;transform:translateX(-50%);width:126px;height:37px;background:#000;border-radius:19px;z-index:5}

/* Status Bar */
.status{height:54px;margin-top:20px;display:flex;align-items:center;justify-content:space-between;padding:0 30px;font-weight:600;color:#000;font-size:17px;letter-spacing:-.02em}
.closet-status{margin-top:5px}
.status .right{display:flex;align-items:center;gap:6px}
.status .right img{height:13px;width:auto;display:block}

/* App Content */
.header{padding:20px 0px 0px;display:flex;align-items:center;justify-content:center;position:relative}
.feed-header{padding:20px 0px 0px}
.closet-header{padding:4px 24px 2px}
.logo{font-weight:600;font-size:32px;letter-spacing:-.01em;background:linear-gradient(135deg,var(--cta-start),var(--cta-mid) 46%,var(--cta-end));
  -webkit-background-clip:text;background-clip:text;-webkit-text-fill-color:transparent}

/* View switching - hide inactive views */
.view{display:none;flex:1;flex-direction:column;overflow:hidden;opacity:0}
.view.active{display:flex;opacity:1;transition:opacity 0.15s ease}
.view-transition{transition:opacity 0.25s ease}

/* Tab bar */
.tabs{position:absolute;left:0;right:0;bottom:0;height:83px;background:#fff;border-top:1px solid rgba(0,0,0,.08);
  display:flex;justify-content:space-around;align-items:flex-start;padding-top:8px;padding-bottom:34px}
.tab{display:flex;flex-direction:column;align-items:center;gap:6px;text-decoration:none;color:#8e8e93;font-size:11px;font-weight:500;transition:color 0.2s ease;cursor:pointer}
.tab.active{color:var(--petrol-600);font-weight:600}
.ico{width:28px;height:28px;display:block}
</style>

<!-- Feed-specific styles -->
<style>
.section{
  padding:4px 24px 12px;
}
.h1{font-weight:700;font-size:26px;line-height:1.1;letter-spacing:-.01em}

.topline{
  display:flex;
  align-items:center;
  justify-content:space-between;
  gap:12px;
  flex-wrap:nowrap;
  margin-top:6px;
}
.topline.single{
  justify-content:flex-start;
  margin-top:4px;
  margin-bottom:8px;
}
.count-pill{
  flex:0 0 auto;
  white-space:nowrap;
  background:var(--petrol-100);
  border:1px solid rgba(0,163,163,.25);
  padding:6px 10px;
  border-radius:999px;
  font:600 12px/1 Inter, system-ui;
  color:var(--petrol-600);
}

/* Enhanced Chips (feed-scoped) */
#feedView .chips{display:flex;gap:8px;padding-top:4px;overflow-x:auto;-webkit-overflow-scrolling:touch;scrollbar-width:none}
#feedView .chips{margin-top:2px}
#feedView .chips::-webkit-scrollbar{display:none}
#feedView .chip{border:1px solid #E8E4DE;background:#fff;color:var(--ink);border-radius:9999px;padding:10px 16px;font-size:13px;font-weight:500;white-space:nowrap;transition:all 0.2s ease;cursor:pointer}
#feedView .chip.is-active{border-color:var(--petrol-400);background:var(--petrol-100);color:var(--petrol-600);font-weight:600;box-shadow:0 2px 8px rgba(0,163,163,.08)}
#feedView .chip:not(.is-active):hover{background:#f8f8f8;border-color:#d0d0d0}

/* Feed */
.feed{
  padding:0 24px 96px;
  overflow-y:auto;
  display:flex;
  flex-direction:column;
  gap:16px;
  scrollbar-width:none;
  -ms-overflow-style:none;
}
.feed::-webkit-scrollbar{display:none;}

/* Enhanced Card */
.card{background:#fff;border:1px solid #eee6;border-radius:18px;overflow:visible;transition:transform 0.2s ease, box-shadow 0.2s ease;position:relative;box-shadow:0 8px 24px rgba(17,25,40,.05)}
.card:hover{transform:translateY(-1px);box-shadow:0 16px 40px rgba(17,25,40,.12)}
.card + .card{margin-top:6px}

.imgbox{position:relative;overflow:hidden;border-radius:18px;box-shadow:inset 0 0 0 2px rgba(255,255,255,.7)}
.imgbox img{display:block;width:100%;height:440px;object-fit:cover;object-position:center 22%}
.img{width:100%;height:440px;object-fit:cover;object-position:center 22%}

/* Size CTA */
.size-cta{position:relative;display:flex;align-items:center;justify-content:space-between;gap:12px;width:100%;
  margin:12px 0 10px;padding:14px 20px;border:none;border-radius:24px;color:#fff;
  background:
    linear-gradient(180deg, rgba(255,255,255,.08) 0%, rgba(255,255,255,0) 8%),
    linear-gradient(135deg, var(--cta-start), var(--cta-mid) 40%, var(--cta-end));
  font:700 15px/1 Inter;cursor:pointer;transform:translateZ(0);transition:all 0.2s ease}
.size-cta:hover{transform:translateY(-1px)}
.size-cta .label{font:800 17px/1.1 Inter;letter-spacing:-.005em;display:flex;align-items:center;gap:8px}
.size-cta .match{display:inline-flex;align-items:center;gap:8px;padding:8px 14px;border-radius:999px;
  background:rgba(255,255,255,.8);border:1px solid rgba(255,255,255,.95);color:var(--ink);font:600 13px/1 Inter;
  backdrop-filter:blur(12px);-webkit-backdrop-filter:blur(12px)}

.info{position:relative;margin-top:12px;padding:14px 18px 12px}
.divider{height:1px;background:rgba(0,0,0,.08);margin:8px 0 8px;border-radius:1px}

.row{display:flex;align-items:center;justify-content:space-between;margin-bottom:8px;padding:0 10px 0 6px}
.left-meta{display:flex;align-items:center;gap:8px}
.brand{font-size:12px;letter-spacing:.3px;color:#555;font-weight:600}
.price{font-weight:700;font-size:17px;color:#2d2d2d}

.trust-item{display:flex;align-items:center;gap:6px;font-size:14px;color:#4C4C50;font-weight:500}
.trust-item svg{width:16px;height:16px;color:#4ade80;position:relative;top:1px}

.details{background:#fff;border:1px solid #eee6;border-radius:16px;padding:12px 16px 8px;transition:max-height .35s ease,opacity .25s ease}
.item{padding:8px 0}
.item+ .item{border-top:1px solid #e9e9ef}
.measure{font-size:14px;line-height:1.55;color:var(--ink)}
.measure strong{font-size:15px;font-weight:700;color:var(--ink)}
.measure .muted{color:var(--muted);font-weight:400}

.spec{display:flex;align-items:center;justify-content:space-between;padding:10px 0}
.badge{display:inline-flex;align-items:center;justify-content:center;gap:0;min-width:68px;font-size:14px;line-height:1;padding:8px 10px;border-radius:999px;background:var(--petrol-100);color:var(--petrol-600);font-weight:700;border:1px solid var(--petrol-400)}

.tip-summary{
  margin-top:12px;
  padding:14px 16px;
  background:var(--petrol-100);
  border:1px solid var(--petrol-400);
  border-radius:12px;
  font-size:14px;
  color:#0B0F14;
}
.shop-row{display:flex;justify-content:center;margin-top:10px;padding:0 18px}
.shop-link{display:flex;align-items:center;justify-content:center;width:100%;min-height:44px;padding:12px 16px;
  background:#FFFFFF;border:1px solid var(--petrol-400);border-radius:12px;
  color:var(--petrol-600);text-decoration:none;font-weight:700;letter-spacing:-.01em;font-size:15px}

.accent{color:var(--petrol-600);font-weight:600}
.advice-inline{margin:6px 0 2px;font-size:15px;line-height:1.55;color:#4C4C50;font-weight:500}
.advice-inline b{color:var(--petrol-600)}
.advice-next{margin-top:14px}

.shop-inline{
  display:block;
  margin-top:12px;
  padding:12px 16px;
  text-align:center;
  border-radius:12px;
  font-weight:800; letter-spacing:-.01em; font-size:16px; line-height:1.3;
  color:#fff; text-decoration:none;
  background:linear-gradient(135deg, var(--cta-start), var(--cta-mid) 40%, var(--cta-end));
}

.fit-details{display:none}
.fit-details.open{display:block}
.hidden{display:none}

/* Proxy card styles */
.proxy-card{background:#fff;border:1px solid rgba(0,0,0,.06);border-radius:18px;padding:8px 12px 10px}
.pc-look-h{display:flex;align-items:center;gap:10px;padding:6px 6px 10px}
.pc-avatar{width:34px;height:34px;border-radius:10px;object-fit:cover}
.pc-avatar--circle{border-radius:999px}
.pc-name{font:700 14px/1.2 Inter;color:#2F2F33}
.pc-bads{display:flex;gap:8px;flex-wrap:wrap}

.pc-match.micro{margin:2px 6px 8px 56px;color:var(--muted);font:600 12px/1.2 Inter;}
.pc-match-link{border:0;background:transparent;color:#0a8;font-weight:800;padding:0}

.pc-hero-wrap{position:relative}
.pc-carousel{position:relative;display:grid;height:520px;overflow:hidden;border-radius:14px;}
.pc-slide{position:relative;grid-area:1 / 1 / -1 / -1;width:100%;height:100%;box-sizing:border-box;overflow:hidden;opacity:0;transition:opacity .25s ease;}
.pc-slide.pc-active{opacity:1;}
.pc-hero-img{display:block;width:100%;height:520px;object-fit:cover;border-radius:14px}
.pc-hero-img--tight{object-position:center 22%}

.pc-carousel .pc-nav{position:absolute;top:50%;transform:translateY(-50%);width:32px;height:32px;border-radius:999px;background:rgba(0,0,0,.35);color:#fff;display:flex;align-items:center;justify-content:center;border:none;cursor:pointer;font-size:0}
.pc-carousel .pc-nav.left{left:10px}
.pc-carousel .pc-nav.right{right:10px}
.pc-carousel .pc-nav.left::before{content:"\2039";font-size:18px;line-height:1;transform:translateX(-1px)}
.pc-carousel .pc-nav.right::before{content:"\203A";font-size:18px;line-height:1;transform:translateX(1px)}

.size-bullet{
  position:absolute;
  top:40px;
  right:10px;
  padding:6px 10px;
  border-radius:999px;
  background:rgba(0,0,0,.45);
  backdrop-filter:blur(2px);
  border:1px solid rgba(255,255,255,.35);
  color:#fff;
  font:700 12px/1 Inter;
  z-index:3;
}

.pc-look-caption{margin-top:14px}
.pc-look-caption p{font:600 14px/1.45 Inter;color:#2F2F33}

.pc-comment-teaser{display:block;width:100%;text-align:left;margin-top:12px;border-radius:16px;border:1px solid rgba(0,0,0,.08);background:#fff;padding:10px 12px;box-shadow:0 2px 6px rgba(0,0,0,.03);cursor:pointer;transition:background .2s ease, box-shadow .2s ease}
.pc-comment-teaser:hover{background:#f7f9fb;box-shadow:0 6px 16px rgba(0,0,0,.06)}
.pc-k{font:600 11px/1.2 Inter;color:var(--muted);margin-bottom:6px}
.pc-row{font:600 13px/1.45 Inter;color:#2F2F33}
.pc-q,.pc-a{font-weight:700}
.pc-sep{margin:0 8px;color:#c4c7cc}
.pc-link{margin-top:6px;font:600 12px/1.2 Inter;color:#009090}

.pc-look-actions{display:flex;gap:14px;margin:16px 0 6px}
.pc-btn-primary{display:inline-flex;align-items:center;justify-content:center;gap:8px;padding:12px 18px;border-radius:999px;background:linear-gradient(135deg, var(--cta-start), var(--cta-mid) 46%, var(--cta-end)); color:#fff; font:700 15px/1.1 Inter; border:1px solid rgba(0,0,0,.04); transition:transform 0.2s ease, box-shadow 0.2s ease; cursor:pointer}
.pc-btn-secondary{display:inline-flex;align-items:center;justify-content:center;gap:8px;padding:12px 18px;border-radius:999px;background:#fff;border:1px solid rgba(0,0,0,.10); color:var(--ink); font:700 15px/1.1 Inter; transition:transform 0.2s ease, box-shadow 0.2s ease; cursor:pointer}

/* Proxi pill */
.pill-proxi{
  display:inline-flex !important; align-items:center !important; justify-content:center !important; gap:4px !important;
  height:24px !important; padding:0 8px !important;
  border-radius:9999px !important;
  background:#FFFFFF !important;
  border:1px solid rgba(0,0,0,.14) !important;
  box-shadow:0 2px 8px rgba(0,0,0,.10) !important;
  color:#0B3D3A !important;
  font:700 12px/1 Inter, system-ui, -apple-system, "Segoe UI", Roboto, Helvetica, Arial !important;
  user-select:none !important; cursor:default !important;
}

.pill-proxi .glyph{
  display:flex; flex-direction:column; align-items:center; justify-content:center;
  width:0.625rem; height:0.625rem;
  gap:calc(0.625rem * 0.10);
}
.pill-proxi .glyph .bar{
  width: calc(0.625rem * 0.76);
  height:calc(0.625rem * 0.14);
  border-radius:calc(0.625rem * 0.10);
  background:linear-gradient(135deg, #005a5c 0%, #008a90 55%, #2fb8bf 100%) !important;
}

.pill-proxi .count{
  font-weight:500; font-feature-settings:"tnum" 1;
  color:#34424D;
}

.pill-proxi--count{
  height: calc(24px * 1.2) !important;
  padding: 0 calc(8px * 1.1) !important;
  font-size: calc(12px * 1.2) !important;
}

.pill-proxi--text{ 
  padding:0 8px !important; 
  background:rgba(255,255,255,.94) !important;
  backdrop-filter:blur(8px) !important;
  border:1px solid rgba(0,0,0,.12) !important;
}
.pill-proxi--text .text-content{
  font-weight:500; font-size:12px;
  color:#34424D;
}

.proxi-badge-wrap{
  position:absolute;
  top:10px;
  right:10px;
  z-index:3;
}

.proxi-inline-wrap{
  position:relative;
  display:inline-flex;
  align-items:center;
}

.proxi-trigger{
  border:0;
  background:transparent;
  padding:0;
  cursor:help !important;
}

.proxi-tip{
  position:absolute;
  display:inline-block;
  width:max-content;
  white-space:nowrap;
  padding:8px 12px;
  border-radius:12px;
  background:rgba(0,0,0,0.9);
  color:#fff;
  border:1px solid rgba(31,174,217,0.65);
  font-family:'Inter', -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Helvetica, Arial, sans-serif;
  font-weight:500;
  font-size:13px;
  letter-spacing:.1px;
  line-height:1.2;
  box-shadow:0 8px 24px rgba(11,15,20,.08);
  opacity:0;
  pointer-events:none;
  transform:translateY(-50%) scale(.96);
  transition:opacity .2s ease, transform .2s ease;
  z-index:3;
}

.proxi-tip::before,
.proxi-tip::after{
  content:"";
  position:absolute;
  top:50%;
  transform:translateY(-50%);
}

.proxi-tip::before{
  border:7px solid transparent;
}

.proxi-tip::after{
  border:6px solid transparent;
}

.proxi-tip--left{
  right:calc(100% + 8px);
  top:50%;
}

.proxi-tip--left::before{
  right:-14px;
  border-left-color:rgba(31,174,217,0.65);
}

.proxi-tip--left::after{
  right:-12px;
  border-left-color:rgba(0,0,0,0.9);
}

.proxi-tip--right{
  left:calc(100% + 8px);
  top:50%;
}

.proxi-tip--right::before{
  left:-14px;
  border-right-color:rgba(31,174,217,0.65);
}

.proxi-tip--right::after{
  left:-12px;
  border-right-color:rgba(0,0,0,0.9);
}

.proxi-trigger:where(:hover, :focus-visible)+.proxi-tip{
  opacity:1;
  pointer-events:auto;
  transform:translateY(-50%) scale(1);
}

/* FTUX */
.ftux--note{
  margin:10px 0 4px; padding:14px 16px;
  border:1px solid rgba(0,0,0,.12); border-radius:18px; background:#fff;
  box-shadow:0 6px 24px rgba(17,25,40,.08);
}
.ftux-head h3{ margin:0 0 8px; font:700 15.5px/1.2 Inter; color:#2f2f33; }
.ftux-row{ display:flex; align-items:center; }
.ftux-pill{
  display:flex;
  align-items:stretch;
  overflow:hidden;
  border-radius:9999px;
  width:100%; border:1px solid rgba(0,0,0,.12); background:#fff;
  min-height:44px;
}
.ftux-msg{ 
  padding:10px 14px;
  font:500 13.5px/1.35 Inter; 
  color:#3d444b; 
  flex:1;
}
.ftux-cta{
  -webkit-appearance:none;
  appearance:none;
  border:0;
  margin:0;
  padding:0 18px;
  display:flex;
  align-items:center;
  justify-content:center;
  white-space:nowrap;
  border-radius:0;
  background:linear-gradient(90deg,#35d0b0,#1aa1b4);
  mask-image:linear-gradient(to left, black 98%, transparent 100%);
  -webkit-mask-image:linear-gradient(to left, black 98%, transparent 100%);
  color:#fff;
  font:700 13px/1 Inter;
  cursor:pointer;
  flex-shrink:0;
  position:relative;
}
.ftux-cta::before{
  content:"";
  position:absolute; left:-1px; top:0; bottom:0; width:1px;
  background: linear-gradient(
    to bottom,
    rgba(0,0,0,.00),
    rgba(0,0,0,.10) 18%,
    rgba(0,0,0,.10) 82%,
    rgba(0,0,0,.00)
  );
}

.has-ftux .chips,
.has-ftux .legend{ display:none; }

.pc-sheet{position:fixed;inset:0;background:rgba(0,0,0,.3);display:flex;align-items:flex-end}
.pc-sheet[hidden]{display:none}
.pc-sheet__card{width:100%;background:#fff;border-radius:16px 16px 0 0;padding:16px 18px;box-shadow:0 -4px 24px rgba(0,0,0,.12)}
.pc-sheet__card h3{margin:4px 0 8px;font:800 16px/1.2 Inter}
.pc-sheet__card p{margin:0 0 12px;font:600 14px/1.45 Inter;color:#2F2F33}
.pc-sheet__close{display:inline-flex;align-items:center;justify-content:center;padding:10px 14px;
  border-radius:10px;border:1px solid rgba(0,0,0,.08);background:#fff;font:700 14px/1.1 Inter}
</style>

<!-- Closet-specific styles -->
<style>
/* Closet filters */
.filters{position:sticky;top:54px;z-index:4;background:var(--bg);padding:8px 20px 6px;border-bottom:1px solid rgba(0,0,0,.06)}
.closet-header + .filters{margin-top:0}
.status.closet-status + .header.closet-header{margin-top:0}
.status.closet-status{margin-bottom:0}
.status + .header.closet-header{padding-top:4px}
.view-toggle{margin-left:auto;display:flex;gap:6px}
.switch{border:1px solid #E8E4DE;background:#fff;padding:6px 10px;border-radius:999px;font:600 12px/1 Inter;color:#4C4C50;cursor:pointer}
.switch.active{color:var(--petrol-600);border-color:rgba(0,163,163,.25);background:rgba(0,163,163,.08)}

/* Closet content */
.content{flex:1;overflow:auto;padding:2px 24px 96px}
.title{font:800 26px/1.1 Inter;margin:6px 0 8px}

/* Closet chips (scoped) */
#closetView .chips{display:flex;gap:8px;overflow-x:auto;-webkit-overflow-scrolling:touch;scrollbar-width:none}
#closetView .chips::-webkit-scrollbar{display:none}
#closetView .chip{border:1px solid var(--border);background:#fff;color:#1F1F1F;border-radius:999px;padding:8px 12px;font-size:12px;white-space:nowrap}
#closetView .chip.is-active{background:var(--petrol-100);color:var(--petrol-600);border-color:var(--petrol-400);font-weight:700;box-shadow:0 2px 8px rgba(0,163,163,.12)}

/* Closet cards */
.list{display:grid;grid-template-columns:1fr;gap:14px}
.grid{display:grid;grid-template-columns:repeat(2,1fr);gap:12px}

.closet-card{position:relative;overflow:hidden;border-radius:18px;background:#f8f8fb;border:1px solid #eee6;box-shadow:0 10px 30px rgba(0,0,0,.08), 0 4px 12px rgba(0,0,0,.03);transition:transform 0.2s ease, box-shadow 0.2s ease}
.closet-card:hover{transform:translateY(-2px);box-shadow:0 15px 40px rgba(0,0,0,.12), 0 6px 16px rgba(0,0,0,.04)}
.closet-card .img{width:100%;height:400px;object-fit:cover;object-position:center;display:block;border-radius:14px}
.closet-card .img.tall{height:400px}
.overlay{position:absolute;inset:auto 0 0 0;padding:10px 10px 12px;background:linear-gradient(180deg,rgba(0,0,0,0) 0%,rgba(0,0,0,.55) 60%,rgba(0,0,0,.75) 100%);color:#fff}
.overlay .brand{font:700 11px/1 Inter;letter-spacing:.04em;opacity:.95}
.overlay .name{font:600 14px/1.2 Inter;margin-top:2px}

.size{position:absolute;top:10px;left:10px;padding:6px 10px;border-radius:999px;background:rgba(0,0,0,.45);backdrop-filter:blur(2px);color:#fff;font:700 12px/1 Inter;z-index:3}

.proxy-pill{
  position:absolute !important; top:10px !important; right:10px !important; z-index:3 !important;
  display:inline-flex !important; align-items:center !important; justify-content:center !important; gap:2px !important;
  height:18px !important; padding:0 4px !important;
  border-radius:9999px !important;
  background:#FFFFFF !important;
  border:1px solid rgba(0,0,0,.16) !important;
  box-shadow:0 2px 6px rgba(0,0,0,.12) !important;
  color:#0B3D3A !important;
  font:700 10px/1 Inter, system-ui, -apple-system, "Segoe UI", Roboto, Helvetica, Arial !important;
  user-select:none !important; cursor:pointer !important;
}

.proxy-pill .icon{
  display:flex; flex-direction:column; align-items:center; justify-content:center; 
  width:8px; height:8px; gap:0.8px;
}
.proxy-pill .icon .bar{
  width:6px; height:1.2px; border-radius:1px;
  background:linear-gradient(135deg, #008888 0%, #34C3CC 46%, #9BFFCF 100%) !important;
}
.proxy-pill .count{font-weight:800; font-feature-settings:"tnum" 1; background:linear-gradient(135deg,var(--cta-start),var(--cta-mid) 46%,var(--cta-end)); -webkit-background-clip:text; background-clip:text; -webkit-text-fill-color:transparent}

/* Proxy sheet */
.sheet{position:fixed; inset:0; background:rgba(0,0,0,.3); display:flex; align-items:flex-end}
.sheet[hidden]{display:none}
.sheet-card{width:100%; background:#fff; border-radius:16px 16px 0 0; padding:16px 18px; box-shadow:0 -4px 24px rgba(0,0,0,.12)}
.sheet-card h3{margin:4px 0 12px; font:800 16px/1.2 Inter}
.proxy-list{list-style:none; margin:0; padding:0}
.proxy-list li{display:flex; align-items:center; gap:10px; padding:10px 0; border-top:1px solid #eee}
.proxy-list li:first-child{border-top:0}
.sheet-close{margin-top:12px; padding:10px 14px; border-radius:10px; border:1px solid #e7e7ea; background:#fff; font:700 14px;cursor:pointer}

/* Legend */
.legend{display:flex; align-items:baseline; gap:.1rem; margin-top:6px; margin-bottom:10px; font-size:clamp(13px,1.7vw,16px); line-height:1.35; color:#6A7A87}
.legend-term{font-weight:600; display:inline-flex; align-items:baseline; gap:.1rem; color:#34424D}
.legend .equiv{display:inline-block; position:relative; width:1.2em; height:.8em; vertical-align:baseline; margin:0 0.05em}
.legend .equiv .bar{position:absolute; left:0.1em; width:1em; height:0.12em; border-radius:0.06em; background:linear-gradient(135deg, #008888 0%, #34C3CC 46%, #9BFFCF 100%)}
.legend .equiv .bar:nth-child(1){top:0.15em}
.legend .equiv .bar:nth-child(2){top:0.39em}
.legend .equiv .bar:nth-child(3){top:0.63em}
.legend-def{color:#6A7A87; font-weight:500}
</style>
</head>
<body class="has-ftux">
  <!-- Proxi icon sprite -->
  <svg style="position:absolute;width:0;height:0;overflow:hidden" aria-hidden="true">
    <symbol id="proxi" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg">
      <rect x="0.96" y="4" width="22.08" height="2.48" rx="1"></rect>
      <rect x="0.96" y="11" width="22.08" height="2.48" rx="1"></rect>
      <rect x="0.96" y="18" width="22.08" height="2.48" rx="1"></rect>
    </symbol>
  </svg>

  <div class="phone">
    <div class="screen">
      <div class="island"></div>
      <div class="status"><div>9:41</div><div class="right"><img src="../img/cellular-connection.svg" alt="cell"/><img src="../img/wifi.svg" alt="wifi"/><img src="../img/battery.svg" alt="battery"/></div></div>

      <div class="header feed-header">
        <div class="logo">proxi</div>
      </div>

      <!-- FEED VIEW -->
      <div id="feedView" class="view active">
        <div class="section">
          <!-- FTUX -->
          <div class="ftux ftux--note" id="ftux">
            <div class="ftux-head"><h3>Your Proxi feed</h3></div>
            <div class="ftux-row">
              <div class="ftux-pill">
                <div class="ftux-msg">Your size twins are here. See what else fits them — and might fit you.</div>
                <button type="button" class="ftux-cta" id="ftuxDismiss">Got it →</button>
              </div>
            </div>
          </div>

          <div class="chips">
            <button class="chip is-active">Wedding guest</button>
            <button class="chip">Midi</button>
            <button class="chip">Under $250</button>
            <button class="chip">Quick ship</button>
            <button class="chip">New in</button>
          </div>
        </div>

        <div class="feed">
          <!-- Proxy card 1 -->
          <section class="proxy-card">
            <header class="pc-look-h">
              <img class="pc-avatar pc-avatar--circle" src="../img/videoframe_611.png" alt="ellaa76 profile photo">
              <div class="pc-name">ellaa76</div>
              <div class="pc-bads">
                <span class="proxi-inline-wrap">
                  <button type="button"
                          class="pill-proxi pill-proxi--count proxi-trigger"
                          aria-label="Shared Proxi items"
                          aria-describedby="tip-proxi-count">
                    <span class="glyph" aria-hidden="true">
                      <svg class="icon-proxi" style="--size: var(--glyph); color: currentColor">
                        <use href="#proxi" xlink:href="#proxi"></use>
                      </svg>
                    </span>
                    <span class="count">2 shared sizes</span>
                  </button>
                  <span class="proxi-tip proxi-tip--right" role="tooltip" id="tip-proxi-count">You share two Proxi Pieces<br>– same item, same size</span>
                </span>
              </div>
            </header>

            <div class="pc-match micro">
              Matches your <button class="pc-match-link" data-open="match">Somerset (XS)</button>
            </div>

            <div class="pc-hero-wrap">
              <div class="proxi-badge-wrap">
                <button type="button"
                        class="pill-proxi pill-proxi--text proxi-trigger proxi-trigger--badge"
                        aria-label="Size twin info"
                        aria-describedby="tip-proxi-hero">
                  <span class="text-content">Same as yours</span>
                </button>
                <div class="proxi-tip proxi-tip--left" role="tooltip" id="tip-proxi-hero">Same as yours (XS)</div>
              </div>
              <div class="pc-carousel" data-index="0">
                <div class="pc-slide pc-active" data-brand="Anthropologie" data-title="Somerset Chiffon Maxi Dress" data-size="XS">
                  <img class="pc-hero-img pc-hero-img--tight" src="../img/videoframe_35967__1_-1760420352907__user1__Anthropologie__Somerset_Chiffon_Maxi_Dress__XXS-proxy-hero@3x.png" alt="Somerset Chiffon Maxi Dress — XS">
                  <span class="size-bullet" aria-label="Size for this item">XS</span>
                </div>
                <div class="pc-slide" data-brand="Anthropologie" data-title="Peregrine Midi Dress" data-size="XS Petite">
                  <img class="pc-hero-img" src="../img/user1__Anthropologie__Peregrine_Midi_Dress__XS_Petite-proxy-hero@3x_20251014_172344.png" alt="Peregrine Midi Dress — XS Petite">
                  <span class="size-bullet" aria-label="Size for this item">XS Petite</span>
                </div>
                <button class="pc-nav left" type="button" aria-label="Previous slide"></button>
                <button class="pc-nav right" type="button" aria-label="Next slide"></button>
              </div>
            </div>

            <div class="pc-look-caption">
              <p><span class="pc-user"><strong id="pcBrand">Anthropologie</strong></span> <span id="pcTitle">Somerset Chiffon Maxi Dress</span> <span id="pcSize">(XS)</span></p>
            </div>

            <div class="pc-comment-teaser" role="button" aria-label="View comments">
              <div class="pc-k">Comments · <span id="pcCCount">12</span></div>
              <div class="pc-row">
                <span class="pc-q">Q:</span> <span id="pcCQ">Is this petite or regular?</span>
                <span class="pc-sep">·</span>
                <span class="pc-a">A:</span> <span id="pcCA">Regular!</span>
              </div>
              <div class="pc-link" id="pcLinkBlock">See full thread &gt;</div>
            </div>

            <div class="pc-look-actions">
              <button class="pc-btn-primary">Shop this item</button>
              <button class="pc-btn-secondary">See more from ellaa76</button>
            </div>
          </section>

          <!-- Proxy card 2 -->
          <section class="proxy-card">
            <header class="pc-look-h">
              <div class="pc-name">srd24</div>
              <div class="pc-bads">
                <span class="proxi-inline-wrap">
                  <button type="button" class="pill-proxi pill-proxi--count proxi-trigger">
                    <span class="glyph">
                      <svg class="icon-proxi" style="--size: var(--glyph); color: currentColor">
                        <use href="#proxi"></use>
                      </svg>
                    </span>
                    <span class="count">1 shared size</span>
                  </button>
                </span>
              </div>
            </header>

            <div class="pc-match micro">
              Matches your <button class="pc-match-link">Somerset (XS)</button>
            </div>

            <div class="pc-hero-wrap">
              <div class="pc-carousel">
                <div class="pc-slide pc-active">
                  <img class="pc-hero-img pc-hero-img--tight" src="../img/videoframe_2906__1_-1760417574510-proxy-hero@3x.png" alt="Green satin dress">
                  <span class="size-bullet">XS</span>
                </div>
              </div>
            </div>

            <div class="pc-look-caption">
              <p><span class="pc-user"><strong>Anthropologie</strong></span> <span>Somerset Chiffon Maxi Dress</span> <span>(XS)</span></p>
            </div>

            <div class="pc-look-actions">
              <button class="pc-btn-primary">Shop this item</button>
              <button class="pc-btn-secondary">See more from srd24</button>
            </div>
          </section>

          <!-- Size guide card -->
          <div class="card">
            <div class="imgbox">
              <img class="img" src="https://images.urbndata.com/is/image/Anthropologie/4130652010091_256_b?$redesign-zoom-5x$" alt="Anthropologie slip dress"/>
              <span class="size-bullet" aria-label="Size for this item">S</span>
            </div>

            <div class="info">
              <button class="size-cta" id="sizeCta" type="button">
                <span class="label">Best Fit: <strong>S</strong></span>
                <span class="match">Fit details</span>
              </button>

              <div class="divider"></div>

              <div class="row">
                <div class="left-meta">
                  <span class="brand">ANTHROPOLOGIE</span>
                  <span class="price">$168.00</span>
                </div>
                <div class="trust-item">
                  <svg viewBox="0 0 16 16"><path d="M6.5 11.2 3.8 8.6l1-1 1.7 1.7 4-4 1 1-5 5z"/></svg>
                  Free returns
                </div>
              </div>

              <div class="divider"></div>

              <div class="details hidden" id="fitDetails">
                <div class="item">
                  <p class="advice-inline">Compared to your size: <strong class="accent">Alexis S</strong> <span class="muted">(perfect fit)</span></p>
                </div>
                <div class="spec">
                  <span class="measure"><strong>Bust —</strong> Looser <span class="muted">(35–36″ vs 33″)</span></span>
                  <span class="badge">+2–3″</span>
                </div>
                <div class="divider"></div>
                <div class="spec">
                  <span class="measure"><strong>Waist —</strong> Matches <span class="muted">(27–28″ vs 27″)</span></span>
                  <span class="badge">≈</span>
                </div>
                <div class="divider"></div>
                <div class="spec">
                  <span class="measure"><strong>Hips —</strong> Matches <span class="muted">(37–38″ vs 37″)</span></span>
                  <span class="badge">≈</span>
                </div>
                <p class="advice-inline advice-next">Prefer a slimmer look? XS will match the bust but feel snug at waist and hips (1–2″ smaller)</p>
                <a class="shop-inline" href="#" target="_blank">Shop S →</a>
              </div>

              <div class="tip-summary">
                Fits like your <strong>Alexis</strong> dress — roomier bust, matching waist &amp; hips.
              </div>

              <div class="shop-row">
                <a class="shop-link" href="#" target="_blank">Shop S</a>
              </div>
            </div>
          </div>
        </div>
      </div>

      <!-- CLOSET VIEW -->
      <div id="closetView" class="view">
        <div class="island"></div>
        <div class="status closet-status"><div>9:41</div><div class="right"><img src="../img/cellular-connection.svg" alt="cell"/><img src="../img/wifi.svg" alt="wifi"/><img src="../img/battery.svg" alt="battery"/></div></div>
        <div class="header closet-header">
          <div class="logo">proxi</div>
        </div>
        <div class="filters">
          <div style="display:flex;align-items:center;gap:10px">
            <div class="chips" id="closetChips">
              <button class="chip is-active" data-filter="all">All</button>
              <button class="chip" data-filter="tops">Tops</button>
              <button class="chip" data-filter="bottoms">Bottoms</button>
              <button class="chip" data-filter="dresses">Dresses</button>
            </div>
            <div class="view-toggle">
              <button class="switch" id="closetListBtn">List</button>
              <button class="switch active" id="closetGridBtn">Grid</button>
            </div>
          </div>
        </div>

        <div class="content">
          <h1 class="title">Your Closet</h1>
          <div class="legend" role="note">
            <span class="legend-term">Proxies <span class="equiv" aria-hidden="true"><div class="bar"></div><div class="bar"></div><div class="bar"></div></span></span>
            <span class="legend-def">users who share your size</span>
          </div>

          <div id="closetItems" class="grid">
            <article class="closet-card" data-category="dresses">
              <span class="size">UK 8</span>
              <button class="proxy-pill">
                <span class="icon">
                  <div class="bar"></div>
                  <div class="bar"></div>
                  <div class="bar"></div>
                </span>
                <span class="count">2</span>
              </button>
              <img class="img tall" src="https://cdn.modaoperandi.com/assets/images/products/1048452/695474/c2/large_georgia-hardinge-gold-relic-dress.jpg?_v=1755324586" alt="Georgia Hardinge Relic Dress">
              <div class="overlay"><div class="brand">GEORGIA HARDINGE</div><div class="name">Relic Pleated Metallic‑Knit Maxi Dress</div></div>
            </article>

            <article class="closet-card" data-category="tops">
              <span class="size">2</span>
              <button class="proxy-pill">
                <span class="icon">
                  <div class="bar"></div>
                  <div class="bar"></div>
                  <div class="bar"></div>
                </span>
                <span class="count">2</span>
              </button>
              <img class="img" src="https://media.thereformation.com/image/upload/f_auto,q_auto:eco,dpr_2.0/w_500/PRD-SFCC/1314122/BLACK/1314122.1.BLACK?_s=RAABAB0" alt="Reformation Taryn Two Piece">
              <div class="overlay"><div class="brand">REFORMATION</div><div class="name">Taryn Two Piece</div></div>
            </article>

            <article class="closet-card" data-category="tops">
              <span class="size">Small</span>
              <button class="proxy-pill">
                <span class="icon">
                  <div class="bar"></div>
                  <div class="bar"></div>
                  <div class="bar"></div>
                </span>
                <span class="count">2</span>
              </button>
              <img class="img" src="https://cdn.modaoperandi.com/assets/images/products/1028958/674197/c/large_alfie-white-backless-top.jpg?_v=1755087491" alt="ALFIE Open Back Top">
              <div class="overlay"><div class="brand">ALFIE</div><div class="name">Open Back Cotton Poplin Top</div></div>
            </article>

            <article class="closet-card" data-category="bottoms">
              <span class="size">26S</span>
              <button class="proxy-pill">
                <span class="icon">
                  <div class="bar"></div>
                  <div class="bar"></div>
                  <div class="bar"></div>
                </span>
                <span class="count">2</span>
              </button>
              <img class="img" src="https://www.ayr.com/cdn/shop/files/secretsauce-goodmood_CAT_d634f664-cb49-4e61-abef-5d94b707075e.jpg?crop=center&height=1440&v=1755036845&width=950" alt="AYR The Secret Sauce">
              <div class="overlay"><div class="brand">AYR</div><div class="name">The Secret Sauce</div></div>
            </article>

            <article class="closet-card" data-category="bottoms">
              <span class="size">M</span>
              <button class="proxy-pill">
                <span class="icon">
                  <div class="bar"></div>
                  <div class="bar"></div>
                  <div class="bar"></div>
                </span>
                <span class="count">2</span>
              </button>
              <img class="img" src="https://static.zara.net/assets/public/a4e8/d8da/2c3b44728736/7e4b4c39762b/03152505800-a1/03152505800-a1.jpg?ts=1753971869534&w=1900" alt="ZARA Flare Pants">
              <div class="overlay"><div class="brand">ZARA</div><div class="name">Flare Pants</div></div>
            </article>

            <article class="closet-card" data-category="tops">
              <span class="size">XS</span>
              <button class="proxy-pill">
                <span class="icon">
                  <div class="bar"></div>
                  <div class="bar"></div>
                  <div class="bar"></div>
                </span>
                <span class="count">2</span>
              </button>
              <img class="img" src="https://media.cos.com/assets/001/6e/d0/6ed0142c6e69ad42e826224d9a8d013f6d3f4685_xxl-1.jpg?imwidth=2160" alt="COS Shrunken T-shirt">
              <div class="overlay"><div class="brand">COS</div><div class="name">Shrunken T‑shirt</div></div>
            </article>

            <article class="closet-card" data-category="dresses">
              <span class="size">S</span>
              <button class="proxy-pill">
                <span class="icon">
                  <div class="bar"></div>
                  <div class="bar"></div>
                  <div class="bar"></div>
                </span>
                <span class="count">2</span>
              </button>
              <img class="img tall" src="https://cdn.modaoperandi.com/assets/images/products/1039207/685257/c/large_alexis-blue-briette-dress.jpg?_v=1755195214" alt="ALEXIS Briette Dress">
              <div class="overlay"><div class="brand">ALEXIS</div><div class="name">Briette Satin Maxi Dress</div></div>
            </article>
          </div>
        </div>
      </div>

      <!-- TAB BAR -->
      <div class="tabs" role="tablist" aria-label="App sections">
        <button class="tab" role="tab" aria-selected="false" data-view="find">
          <svg class="ico" viewBox="0 0 256 256"><path fill="currentColor" d="M241,150.65s0,0,0-.05a51.33,51.33,0,0,0-2.53-5.9L196.93,50.18a12,12,0,0,0-2.5-3.65,36,36,0,0,0-50.92,0A12,12,0,0,0,140,55V76H116V55a12,12,0,0,0-3.51-8.48,36,36,0,0,0-50.92,0,12,12,0,0,0-2.5,3.65L17.53,144.7A51.33,51.33,0,0,0,15,150.6s0,0,0,.05A52,52,0,1,0,116,168V100h24v68a52,52,0,1,0,101-17.35ZM80,62.28a12,12,0,0,1,12-1.22v63.15a51.9,51.9,0,0,0-35.9-7.62ZM64,196a28,28,0,1,1,28-28A28,28,0,0,1,64,196ZM164,61.06a12.06,12.06,0,0,1,12,1.22l23.87,54.31a51.9,51.9,0,0,0-35.9,7.62ZM192,196a28,28,0,1,1,28-28A28,28,0,0,1,192,196Z"/></svg>
          <span>Find</span>
        </button>
        <button class="tab active" role="tab" aria-selected="true" data-view="feed">
          <svg class="ico" viewBox="0 0 256 256"><path fill="currentColor" d="M225.24,174.74a12,12,0,0,1-1.58,16.89C205.49,206.71,189.06,212,174.15,212c-19.76,0-36.86-9.29-51.88-17.44-25.06-13.62-44.86-24.37-74.61.3a12,12,0,1,1-15.32-18.48c42.25-35,75-17.23,101.39-2.92,25.06,13.61,44.86,24.37,74.61-.3A12,12,0,0,1,225.24,174.74Zm-16.9-57.59c-29.75,24.67-49.55,13.91-74.61.3-26.35-14.3-59.14-32.11-101.39,2.92a12,12,0,0,0,15.32,18.48c29.75-24.67,49.55-13.92,74.61-.3,15,8.15,32.12,17.44,51.88,17.44,14.91,0,31.34-5.29,49.51-20.36a12,12,0,0,0-15.32-18.48ZM47.66,82.84c29.75-24.67,49.55-13.92,74.61-.3,15,8.15,32.12,17.44,51.88,17.44,14.91,0,31.34-5.29,49.51-20.36a12,12,0,0,0-15.32-18.48c-29.75,24.67-49.55,13.92-74.61.3-26.35-14.3-59.14-32.11-101.39,2.93A12,12,0,1,0,47.66,82.84Z"/></svg>
          <span>Feed</span>
        </button>
        <button class="tab" role="tab" aria-selected="false" data-view="closet">
          <svg class="ico" viewBox="0 0 256 256"><path fill="currentColor" d="M244,168,148,96l19.2-14.4A12,12,0,0,0,172,72a44,44,0,0,0-87.66-5.48,12,12,0,1,0,23.82,3,20,20,0,0,1,39.09-2.92L121,86.24c-.15.1-.29.21-.43.32L12,168a20,20,0,0,0,12,36H232a20,20,0,0,0,12-36ZM36,180l92-69,92,69Z"/></svg>
          <span>Closet</span>
        </button>
        <button class="tab" role="tab" aria-selected="false" data-view="profile">
          <svg class="ico" viewBox="0 0 256 256"><path fill="currentColor" d="M234.38,210a123.36,123.36,0,0,0-60.78-53.23,76,76,0,1,0-91.2,0A123.36,123.36,0,0,0,21.62,210a12,12,0,1,0,20.77,12c18.12-31.32,50.12-50,85.61-50s67.49,18.69,85.61,50a12,12,0,0,0,20.77-12ZM76,96a52,52,0,1,1,52,52A52.06,52.06,0,0,1,76,96Z"/></svg>
          <span>Profile</span>
        </button>
      </div>
    </div>
  </div>

<!-- Sheets -->
<div id="pc-sheet" class="pc-sheet" hidden>
  <div class="pc-sheet__card">
    <h3>Why this proxy?</h3>
    <p><strong>ellaa76</strong> wears the same piece you own: <strong>Anthropologie Somerset (XS)</strong>.
       Seeing how it fits them helps you compare size and fit to similar items.</p>
    <button class="pc-sheet__close">Got it</button>
  </div>
</div>

<div id="proxy-sheet" class="sheet" hidden>
  <div class="sheet-card">
    <h3>Proxies for Somerset (XS)</h3>
    <ul class="proxy-list">
      <li><img src="https://i.pravatar.cc/40?img=12" alt="" width="28" height="28" style="border-radius:50%"><b>@ellaa76</b> • XS • "Regular fits best"</li>
      <li><img src="https://i.pravatar.cc/40?img=15" alt="" width="28" height="28" style="border-radius:50%"><b>@vera</b> • XS • "Roomier bust"</li>
    </ul>
    <button class="sheet-close">Done</button>
  </div>
</div>

<script>
// View switching
(function(){
  const tabs = document.querySelectorAll('.tab[data-view]');
  const views = {
    feed: document.getElementById('feedView'),
    closet: document.getElementById('closetView')
  };

  function setActiveTab(viewName){
    tabs.forEach(tab => {
      const isActive = tab.dataset.view === viewName;
      tab.classList.toggle('active', isActive);
      if(tab.getAttribute('role') === 'tab'){
        tab.setAttribute('aria-selected', isActive ? 'true' : 'false');
      }
    });
  }

  function showView(viewName, push=false){
    Object.keys(views).forEach(name => {
      const view = views[name];
      if (!view) return;
      view.classList.toggle('active', name === viewName);
    });
    setActiveTab(viewName);
    // Deep link without full reload
    const url = new URL(location.href);
    url.searchParams.set('view', viewName);
    if(push){
      history.pushState({view:viewName}, '', url);
    }else{
      history.replaceState({view:viewName}, '', url);
    }
  }

  // Init from URL (?view=closet or hash #closet)
  const params = new URLSearchParams(location.search);
  const fromHash = (location.hash||'').replace('#','');
  const initial = (params.get('view') || fromHash || 'feed');
  showView(initial, false);

  tabs.forEach(tab => {
    tab.addEventListener('click', () => {
      const viewName = tab.dataset.view;
      if (viewName && views[viewName]) {
        showView(viewName, true);
      }
    });
  });

  window.addEventListener('popstate', (e)=>{
    const viewName = (e.state && e.state.view) || new URLSearchParams(location.search).get('view') || 'feed';
    showView(viewName, false);
  });
})();

// FTUX dismiss
(function(){
  var ftux = document.getElementById('ftux');
  var btn  = document.getElementById('ftuxDismiss');
  var body = document.body;

  if (localStorage.getItem('proxiFtuxSeen') === '1') {
    body.classList.remove('has-ftux');
    if (ftux) ftux.remove();
    return;
  }

  if (btn) btn.addEventListener('click', function(){
    localStorage.setItem('proxiFtuxSeen', '1');
    body.classList.remove('has-ftux');
    if (ftux) ftux.remove();
  });
})();

// Proxy carousel
(function () {
  const card = document.querySelector('.proxy-card');
  if (!card) return;

  const slides = card.querySelectorAll('.pc-carousel .pc-slide');
  if(!slides.length) return;

  const brandEl = document.getElementById('pcBrand');
  const titleEl = document.getElementById('pcTitle');
  const sizeEl  = document.getElementById('pcSize');

  function applyFromSlide(slide){
    if(!slide) return;
    const { brand, title, size } = slide.dataset || {};
    if(brandEl) brandEl.textContent = brand || '';
    if(titleEl) titleEl.textContent = title || '';
    if(sizeEl)  sizeEl.textContent  = size ? `(${size})` : '';
  }

  let idx = 0;
  function show(n){
    idx = (n + slides.length) % slides.length;
    slides.forEach((s,i)=> s.classList.toggle('pc-active', i===idx));
    applyFromSlide(slides[idx]);
  }

  const navLeft  = card.querySelector('.pc-nav.left');
  const navRight = card.querySelector('.pc-nav.right');
  if(navLeft)  navLeft.addEventListener('click', ()=> show(idx - 1));
  if(navRight) navRight.addEventListener('click', ()=> show(idx + 1));

  show(0);
})();

// Size details toggle
(function(){
  const sizeCta = document.getElementById('sizeCta');
  const details = document.getElementById('fitDetails');
  const summary = document.querySelector('.tip-summary');
  const match = sizeCta?.querySelector('.match');

  if(sizeCta){
    sizeCta.addEventListener('click', ()=>{
      const isOpen = details && !details.classList.contains('hidden');
      if(isOpen){
        details?.classList.add('hidden');
        if(summary) summary.style.display = '';
        if(match) match.textContent = 'Fit details';
      }else{
        details?.classList.remove('hidden');
        if(summary) summary.style.display = 'none';
        if(match) match.textContent = 'Hide details';
      }
    });
  }
})();

// Closet view toggle
(function(){
  const items = document.getElementById('closetItems');
  const listBtn = document.getElementById('closetListBtn');
  const gridBtn = document.getElementById('closetGridBtn');
  listBtn?.addEventListener('click',()=>{listBtn.classList.add('active');gridBtn?.classList.remove('active');if(items)items.className='list'});
  gridBtn?.addEventListener('click',()=>{gridBtn.classList.add('active');listBtn?.classList.remove('active');if(items)items.className='grid'});
})();

// Closet filter chips
(function(){
  const chips = document.getElementById('closetChips');
  chips?.addEventListener('click', (e)=>{
    const btn = e.target.closest('.chip');
    if(!btn) return;
    chips.querySelectorAll('.chip').forEach(c=>c.classList.remove('is-active'));
    btn.classList.add('is-active');
    const filter = btn.dataset.filter;
    document.querySelectorAll('#closetItems .closet-card').forEach(card=>{
      const match = filter==='all' || card.dataset.category===filter;
      card.style.display = match ? '' : 'none';
    });
  });
})();

// Sheets
(function(){
  const link = document.querySelector('.pc-match-link');
  const sheet = document.querySelector('#pc-sheet');
  const close = sheet?.querySelector('.pc-sheet__close');
  link?.addEventListener('click', ()=> sheet.hidden = false);
  close?.addEventListener('click', ()=> sheet.hidden = true);
  sheet?.addEventListener('click', (e)=>{ if(e.target === sheet) sheet.hidden = true; });

  document.addEventListener('click', (e)=>{
    const btn = e.target.closest('.proxy-pill');
    if(btn){
      document.querySelector('#proxy-sheet')?.removeAttribute('hidden');
    }
    if(e.target.matches('.sheet, .sheet-close')){
      const isBackdrop = e.target.classList.contains('sheet');
      if(isBackdrop || e.target.classList.contains('sheet-close')){
        document.querySelector('#proxy-sheet')?.setAttribute('hidden','');
      }
    }
  });
})();
</script>

</body>
</html>

