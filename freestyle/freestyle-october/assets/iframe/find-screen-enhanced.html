<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Proxi â€” Find Your Size (Enhanced)</title>
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700;800&display=swap" rel="stylesheet">
  <link rel="stylesheet" href="../../../freestyle-tokens.css">
  <style>
    :root{
      --bg: var(--canvas-0);
      --ink: var(--ink-900);
      --muted: var(--ink-300);
      --accent: var(--petrol-600);
      --card: #FFFFFF;
      --track: var(--canvas-100);
      --focus-gradient: var(--brand-sheen);
      --shadow-surface: var(--elev-1);
      --shadow-elevated: var(--elev-2);
      --radius-thumb: 12px;
    }
*{margin:0;padding:0;box-sizing:border-box}
html{background:var(--bg)}
body{font-family:Inter,system-ui,-apple-system,"Segoe UI",Roboto,Helvetica,Arial;background:var(--bg);color:var(--ink);
  min-height:100vh;display:flex;align-items:center;justify-content:center;padding:0;position:relative}
/* Warm page glow behind app content */
body::before{
  content:""; position:fixed; inset:-20% -10% auto -10%; height:60vh; pointer-events:none;
  background:
    radial-gradient(900px 380px at 50% -120px, rgba(0,163,163,.05), transparent 60%),
    radial-gradient(1200px 520px at 10% -80px, rgba(166,255,203,.05), transparent 65%);
  filter:saturate(115%);
}

/* iPhone Frame */
.phone{width:430px;height:932px;border-radius:55px;background:transparent;border:2px solid #000;position:relative;box-shadow:none}
.screen{position:absolute;inset:2px;background:#fff;border-radius:53px;overflow:hidden;display:flex;flex-direction:column}
.screen,
.phone,
.device,
.feed-viewport{
  overflow-x:hidden;
}

/* Dynamic Island */
.island{position:absolute;top:11px;left:50%;transform:translateX(-50%);width:126px;height:37px;background:#000;border-radius:19px;z-index:5}

/* Status Bar */
.status{height:54px;margin-top:4px;display:flex;align-items:center;justify-content:space-between;padding:0 30px;font-weight:600;color:#000;font-size:17px;letter-spacing:-.02em}
.status .right{display:flex;align-items:center;gap:6px}
.status .right img{height:13px;width:auto;display:block}

/* App Content */
.header{padding:3px 0px 0px;display:flex;align-items:center;justify-content:center;position:relative;margin-top:-5px}
.logo{font-weight:600;font-size:32px;letter-spacing:-.01em;background:var(--brand-sheen);
  -webkit-background-clip:text;background-clip:text;-webkit-text-fill-color:transparent}

/* Content Container */
.content{
  flex:1;
  overflow-y:auto;
  padding:20px 0;
}

/* Enhanced Loading Card */
.loading-card{
  margin:24px 24px 16px;
  padding:20px 16px 20px;
  background:#fff;
  border:1px solid rgba(11,15,20,.06);
  border-radius:18px;
  box-shadow:var(--shadow-elevated);
  opacity:0;
  transform:translateY(4px);
  transition:opacity .22s ease, transform .22s ease;
}
.loading-card.is-visible{opacity:1;transform:none}

.load-rows{display:flex;flex-direction:column;gap:10px}
.load-row{display:flex;align-items:center;gap:12px;font:600 17px/1.2 Inter;color:#3A4652}
.load-row.done{color:#0E8A62}
.load-row.active{color:#2A3642}
.load-row .text{flex:1}

/* Success checkmark */
.dot{
  width:24px;
  height:24px;
  border-radius:50%;
  display:grid;
  place-items:center;
  font-weight:900;
  font-size:14px;
  background:linear-gradient(135deg, #CFF3E1, #A6FFCB);
  color:#0E8A62;
  box-shadow:0 2px 4px rgba(14,138,98,.15);
}

/* Enhanced spinner with gradient */
.spinner{
  width:24px;
  height:24px;
  border-radius:50%;
  border:3px solid #E6F5F5;
  border-top:3px solid transparent;
  background:linear-gradient(#16B5B5, #16B5B5) border-box,
              conic-gradient(from 180deg, #16B5B5, #7FE1FF, #16B5B5) border-box;
  -webkit-mask:radial-gradient(farthest-side, transparent calc(100% - 3px), #000 calc(100% - 3px));
  mask:radial-gradient(farthest-side, transparent calc(100% - 3px), #000 calc(100% - 3px));
  animation:spin .9s linear infinite;
}
@keyframes spin{to{transform:rotate(360deg)}}

/* Product chip */
.mini-chip{
  display:flex;
  align-items:center;
  gap:12px;
  padding:8px 10px;
  border-radius:14px;
  background:linear-gradient(135deg, rgba(0,163,163,.04), rgba(127,225,255,.03));
  border:1px solid rgba(0,163,163,.12);
  margin-left:auto;
}
.mini-thumb{
  width:40px;
  height:40px;
  border-radius:10px;
  object-fit:cover;
  background:#f2f4f6;
  box-shadow:0 1px 3px rgba(0,0,0,.08);
}
.mini-meta .brand{
  font-weight:800;
  font-size:13px;
  letter-spacing:.02em;
  color:#24323a;
  line-height:1.2;
  text-transform:uppercase;
}
.mini-meta .title{
  font-size:12.5px;
  color:#6A7683;
  line-height:1.2;
  margin-top:2px;
}

/* Enhanced progress bar with percentage */
.progress-wrapper{
  position:relative;
  margin-top:16px;
}
.progress-label{
  display:flex;
  justify-content:space-between;
  align-items:center;
  margin-bottom:6px;
}
.progress-text{
  font-size:12px;
  color:var(--muted);
  font-weight:500;
}
.progress-percent{
  font-size:13px;
  font-weight:700;
  color:var(--petrol-600);
}
.progress{
  position:relative;
  height:6px;
  border-radius:999px;
  background:rgba(0,163,163,.08);
  overflow:hidden;
}
.progress-bar{
  position:absolute;
  inset:0;
  background:linear-gradient(90deg, #00A3A3, #16B5B5);
  border-radius:999px;
  transform-origin:left;
  transform:scaleX(0);
  transition:transform 0.5s cubic-bezier(0.4, 0, 0.2, 1);
  box-shadow:inset 0 0 0 1px rgba(255,255,255,.2);
}
.progress-bar::after{
  content:'';
  position:absolute;
  right:4px;
  top:50%;
  transform:translateY(-50%);
  width:2px;
  height:2px;
  background:rgba(255,255,255,.6);
  border-radius:50%;
  animation:pulse 1.5s ease-in-out infinite;
}
@keyframes pulse{
  0%, 100%{opacity:1;transform:translateY(-50%) scale(1)}
  50%{opacity:.6;transform:translateY(-50%) scale(1.5)}
}

/* Loading stats section */
.loading-stats{
  margin-top:16px;
  padding-top:16px;
  border-top:1px solid rgba(0,0,0,.04);
  display:flex;
  justify-content:space-around;
  align-items:center;
}
.loading-stat{
  display:flex;
  flex-direction:column;
  align-items:center;
  gap:4px;
}
.loading-stat-value{
  font-size:20px;
  font-weight:700;
  background:var(--brand-sheen);
  -webkit-background-clip:text;
  background-clip:text;
  -webkit-text-fill-color:transparent;
  line-height:1;
}
.loading-stat-label{
  font-size:11px;
  color:var(--muted);
  text-transform:uppercase;
  letter-spacing:0.04em;
  font-weight:500;
}

/* Rotating messages */
.loading-message{
  margin-top:12px;
  padding:8px 12px;
  background:linear-gradient(135deg, rgba(166,255,203,.08), rgba(127,225,255,.06));
  border-radius:10px;
  font-size:13px;
  color:#3A4652;
  text-align:center;
  min-height:32px;
  display:flex;
  align-items:center;
  justify-content:center;
  transition:opacity 0.3s ease;
}
.loading-message.fade{opacity:0}
.loading-message .emoji{
  font-size:16px;
  margin-right:6px;
}

/* Size twins preview (skeleton) */
.twins-preview{
  margin-top:16px;
  padding-top:16px;
  border-top:1px solid rgba(0,0,0,.04);
}
.twins-preview-title{
  font-size:12px;
  font-weight:600;
  color:var(--muted);
  text-transform:uppercase;
  letter-spacing:0.04em;
  margin-bottom:10px;
}
.twins-skeleton{
  display:flex;
  gap:8px;
}
.twin-skeleton{
  width:44px;
  height:44px;
  border-radius:22px;
  background:linear-gradient(90deg, #f0f2f4 0%, #f8f9fa 50%, #f0f2f4 100%);
  background-size:200% 100%;
  animation:shimmer 1.5s ease-in-out infinite;
}
@keyframes shimmer{
  0%{background-position:200% 0}
  100%{background-position:-200% 0}
}

/* Bottom navigation */
.bottom-nav{
  position:absolute;
  bottom:0;
  left:0;
  right:0;
  height:83px;
  background:#fff;
  border-top:1px solid rgba(0,0,0,.06);
  display:flex;
  justify-content:space-around;
  align-items:center;
  padding:8px 20px 24px;
}
.nav-item{
  display:flex;
  flex-direction:column;
  align-items:center;
  gap:4px;
  text-decoration:none;
  color:#999;
  font-size:11px;
  font-weight:500;
  cursor:pointer;
  transition:color 0.2s;
}
.nav-item.active{color:var(--petrol-600)}
.nav-item:hover{color:var(--petrol-500)}
.nav-icon{
  width:28px;
  height:28px;
  display:flex;
  align-items:center;
  justify-content:center;
}

/* Reduced motion */
@media (prefers-reduced-motion: reduce){
  .loading-card,
  .progress-bar,
  .twin-skeleton{transition:none!important}
  .spinner,
  .pulse,
  .shimmer{animation:none!important}
}
  </style>
</head>
<body>
  <div class="phone">
    <div class="screen">
      <div class="island"></div>
      <div class="status">
        <div>9:41</div>
        <div class="right">
          <img src="../img/cellular-connection.svg" alt="cell"/>
          <img src="../img/wifi.svg" alt="wifi"/>
          <img src="../img/battery.svg" alt="battery"/>
        </div>
      </div>

      <!-- Main Content -->
      <div class="content">
        <div class="header">
          <div class="logo">proxi</div>
        </div>

        <!-- Enhanced Loading Card -->
        <section class="loading-card is-visible" aria-live="polite">
          <div class="load-rows">
            <div class="load-row done">
              <span class="dot">âœ“</span>
              <span class="text">Product matched</span>
              <div class="mini-chip">
                <img class="mini-thumb" src="../img/pnpdress.png" alt="Product" />
                <div class="mini-meta">
                  <div class="brand">PETAL & PUP</div>
                  <div class="title">Botanique Midi Dress</div>
                </div>
              </div>
            </div>
            <div class="load-row active">
              <span class="spinner"></span>
              <span class="text" id="loadingText">Finding your size twins...</span>
            </div>
          </div>

          <!-- Progress with percentage -->
          <div class="progress-wrapper">
            <div class="progress-label">
              <span class="progress-text">Analyzing fit data</span>
              <span class="progress-percent" id="progressPercent">45%</span>
            </div>
            <div class="progress">
              <span class="progress-bar" id="progressBar" style="transform: scaleX(0.45)"></span>
            </div>
          </div>

          <!-- Loading stats -->
          <div class="loading-stats">
            <div class="loading-stat">
              <span class="loading-stat-value" id="twinsCount">247</span>
              <span class="loading-stat-label">Size Twins</span>
            </div>
            <div class="loading-stat">
              <span class="loading-stat-value" id="brandsCount">18</span>
              <span class="loading-stat-label">Brands</span>
            </div>
            <div class="loading-stat">
              <span class="loading-stat-value" id="matchRate">92%</span>
              <span class="loading-stat-label">Match Rate</span>
            </div>
          </div>

          <!-- Rotating message -->
          <div class="loading-message" id="loadingMessage">
            <span class="emoji">ðŸ’¡</span>
            <span>73% of returns are due to sizing issues</span>
          </div>

          <!-- Size twins preview skeleton -->
          <div class="twins-preview">
            <div class="twins-preview-title">Finding twins who wear size S...</div>
            <div class="twins-skeleton">
              <div class="twin-skeleton"></div>
              <div class="twin-skeleton"></div>
              <div class="twin-skeleton"></div>
              <div class="twin-skeleton"></div>
              <div class="twin-skeleton"></div>
              <div class="twin-skeleton"></div>
            </div>
          </div>
        </section>
      </div>

      <!-- Bottom Navigation -->
      <nav class="bottom-nav">
        <div class="nav-item active">
          <svg class="nav-icon" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
            <circle cx="11" cy="11" r="8" stroke="currentColor" stroke-width="2"/>
            <path d="M21 21L16.65 16.65" stroke="currentColor" stroke-width="2" stroke-linecap="round"/>
          </svg>
          <span>Find</span>
        </div>
        <div class="nav-item">
          <svg class="nav-icon" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
            <path d="M4 7H20M4 12H20M4 17H20" stroke="currentColor" stroke-width="2" stroke-linecap="round"/>
          </svg>
          <span>Feed</span>
        </div>
        <div class="nav-item">
          <svg class="nav-icon" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
            <path d="M19 3H5C3.89543 3 3 3.89543 3 5V19C3 20.1046 3.89543 21 5 21H19C20.1046 21 21 20.1046 21 19V5C21 3.89543 20.1046 3 19 3Z" stroke="currentColor" stroke-width="2"/>
          </svg>
          <span>Closet</span>
        </div>
        <div class="nav-item">
          <svg class="nav-icon" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
            <circle cx="12" cy="8" r="3" stroke="currentColor" stroke-width="2"/>
            <path d="M20 21C20 18.2386 16.4183 16 12 16C7.58172 16 4 18.2386 4 21" stroke="currentColor" stroke-width="2" stroke-linecap="round"/>
          </svg>
          <span>Profile</span>
        </div>
      </nav>
    </div>
  </div>

  <script>
    // Fun facts and messages to rotate through
    const messages = [
      { emoji: 'ðŸ’¡', text: '73% of returns are due to sizing issues' },
      { emoji: 'ðŸ‘—', text: 'Checking fit data from 1,247 users...' },
      { emoji: 'âœ¨', text: 'Finding people with similar measurements...' },
      { emoji: 'ðŸ“Š', text: 'Analyzing sizing across 18+ brands...' },
      { emoji: 'ðŸŽ¯', text: 'Matching your body type preferences...' },
      { emoji: 'ðŸ‘¥', text: 'Your size twins know what fits best!' },
      { emoji: 'ðŸ“', text: 'Same size can vary 2" between brands' },
      { emoji: 'ðŸ›ï¸', text: 'Size twins reduce returns by 67%' }
    ];

    const loadingTexts = [
      'Finding your size twins...',
      'Analyzing fit data...',
      'Checking community reviews...',
      'Matching body types...',
      'Almost there...'
    ];

    let messageIndex = 0;
    let textIndex = 0;
    let progress = 0;

    // Rotate messages
    function rotateMessage() {
      const messageEl = document.getElementById('loadingMessage');
      messageEl.classList.add('fade');

      setTimeout(() => {
        messageIndex = (messageIndex + 1) % messages.length;
        const msg = messages[messageIndex];
        messageEl.innerHTML = `<span class="emoji">${msg.emoji}</span><span>${msg.text}</span>`;
        messageEl.classList.remove('fade');
      }, 300);
    }

    // Update loading text
    function updateLoadingText() {
      textIndex = (textIndex + 1) % loadingTexts.length;
      document.getElementById('loadingText').textContent = loadingTexts[textIndex];
    }

    // Simulate progress
    function updateProgress() {
      progress = Math.min(progress + Math.random() * 15 + 5, 95);
      document.getElementById('progressBar').style.transform = `scaleX(${progress / 100})`;
      document.getElementById('progressPercent').textContent = `${Math.round(progress)}%`;

      // Update stats with some animation
      const twins = 200 + Math.round(progress * 3);
      document.getElementById('twinsCount').textContent = twins;

      if (progress < 95) {
        setTimeout(updateProgress, 800);
      }
    }

    // Animate number counting
    function animateNumber(elementId, start, end, duration) {
      const element = document.getElementById(elementId);
      const increment = (end - start) / (duration / 16);
      let current = start;

      const timer = setInterval(() => {
        current += increment;
        if (current >= end) {
          current = end;
          clearInterval(timer);
        }
        element.textContent = Math.round(current);
      }, 16);
    }

    // Start animations
    setTimeout(() => {
      updateProgress();
      setInterval(rotateMessage, 3000);
      setInterval(updateLoadingText, 2500);

      // Animate initial stats
      animateNumber('twinsCount', 0, 247, 1000);
      animateNumber('brandsCount', 0, 18, 800);
    }, 500);
  </script>
</body>
</html>