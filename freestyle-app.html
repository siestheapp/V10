<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>Freestyle — Fashion App</title>
<link rel="preconnect" href="https://fonts.googleapis.com">
<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
<link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700;800&display=swap" rel="stylesheet">
<!-- Include the data model -->
<script src="./mockup-data.js"></script>
<style>
:root{
  /* Dark theme colors */
  --ink-900:#1A1F26; /* primary text / dark bg - lighter */
  --ink-700:#232A32; /* dark surfaces, nav - lighter */
  --ink-600:#2A3642; /* button hover states - lighter */
  --ink-500:#3A4652; /* subhead, muted text - lighter */
  --ink-400:#4A5561; /* lighter borders */
  --ink-300:#6A7683; /* secondary text, captions */

  --canvas-0:#F7F9FB; /* app background (light) */
  --canvas-50:#EFF3F6; /* cards/sections (light) */
  --canvas-100:#E9EEF1; /* borders/dividers (light) */

  /* --- Brand & Accents --- */
  --petrol-600:#009090; /* pressed/active */
  --petrol-500:#00A3A3; /* primary brand / CTA */
  --petrol-400:#16B5B5; /* hover/highlight */
  --petrol-100:#E0F7F7; /* light pills/backgrounds */

  --mint-400:#A6FFCB; /* sub-accent */
  --ice-300:#7FE1FF;  /* cool complement */
  --coral-500:#FF6B5A; /* alerts / "tight" state */

  /* --- Gradient --- */
  --brand-sheen: linear-gradient(135deg,#00A3A3 0%,#7FE1FF 50%,#A6FFCB 100%);

  /* --- Radii --- */
  --radius-card:16px;
  --radius-btn:12px;
  --radius-pill:999px;
  --radius-xl:22px;

  /* --- Spacing scale --- */
  --space-4:4px;
  --space-6:6px;
  --space-8:8px;
  --space-10:10px;
  --space-12:12px;
  --space-14:14px;
  --space-16:16px;
  --space-20:20px;
  --space-24:24px;
  --space-32:32px;

  /* --- Shadows --- */
  --elev-0: 0 1px 2px rgba(0,0,0,.06);        /* subtle */
  --elev-1: 0 8px 24px rgba(11,15,20,.08);    /* card */
  --elev-2: 0 20px 60px rgba(0,0,0,.18);      /* modal/cta */

  /* Dark theme mappings for app content only */
  --bg: var(--ink-900);
  --ink: #FFFFFF;
  --muted: var(--ink-300);
  --accent: var(--petrol-500);
  --card: var(--ink-700);
  --track: var(--ink-500);
  --shadow: var(--elev-1);
  --border: rgba(255,255,255,.08);
}

/* Light theme mappings (token-based) */
.theme-light{
  --bg: var(--canvas-0);
  --ink: var(--ink-900);
  --muted: var(--ink-500);
  --accent: var(--petrol-500);
  --card: #FFFFFF;
  --track: var(--canvas-100);
  --shadow: var(--elev-0);
  --border: rgba(11,15,20,.08);
}

/* Component adjustments in light */
.theme-light .screen{ background:#fff; }
.theme-light .card,
.theme-light .details{ background:#fff; border:1px solid var(--border); box-shadow:var(--elev-0); }
.theme-light .chip{ border:1px solid var(--canvas-100); background:#fff; color:var(--ink); }
.theme-light .chip.is-active{ background:var(--petrol-100); color:var(--petrol-600); border-color:var(--petrol-400); box-shadow:0 2px 8px rgba(0,163,163,.12); }
.theme-light .status{ color:var(--ink-900); }
.theme-light .status .right img{ filter:none; }
.theme-light .tabs{ background:rgba(255,255,255,.85); border-top:1px solid var(--canvas-100); }
.theme-light .tab{ color:var(--ink-500); }
.theme-light .tab.active{ color:var(--petrol-600); }

/* Theme toggle button */
.theme-toggle{ margin-left:auto; border:1px solid var(--border); background:transparent; color:var(--ink); border-radius:10px; padding:6px 10px; font:600 12px/1 Inter; cursor:pointer }
.theme-toggle:hover{ background:rgba(0,0,0,.04) }

*{margin:0;padding:0;box-sizing:border-box}
body{font-family:Inter,system-ui,-apple-system,"Segoe UI",Roboto,Helvetica,Arial;background:linear-gradient(180deg, #FFFFFF 0%, #F8F9FA 100%);color:var(--ink);
  min-height:100vh;display:flex;align-items:center;justify-content:center;padding:0;position:relative}

/* iPhone 15 Pro Max Frame (Photorealistic Titanium) */
.phone{width:430px;height:932px;border-radius:65px;background:linear-gradient(135deg, #E8E8E8 0%, #D0D0D0 20%, #B8B8B8 40%, #A8A8A8 60%, #989898 80%, #888888 100%);padding:6px;box-shadow:0 30px 100px rgba(0,0,0,0.5), 0 15px 40px rgba(0,0,0,0.3), 0 5px 15px rgba(0,0,0,0.2), inset 0 3px 6px rgba(255,255,255,0.5), inset 0 -2px 4px rgba(0,0,0,0.3);position:relative}
.phone::before{content:"";position:absolute;top:0;left:0;right:0;bottom:0;border-radius:65px;background:linear-gradient(45deg, rgba(255,255,255,0.15) 0%, transparent 30%, rgba(0,0,0,0.05) 70%, rgba(255,255,255,0.05) 100%);pointer-events:none}
.phone::after{content:"";position:absolute;top:2px;left:2px;right:2px;bottom:2px;border-radius:63px;background:linear-gradient(135deg, rgba(255,255,255,0.1) 0%, transparent 50%, rgba(0,0,0,0.1) 100%);pointer-events:none}
.screen{height:100%;background:var(--ink-900);border-radius:59px;overflow:hidden;position:relative;border:1px solid rgba(0,0,0,0.2);box-shadow:inset 0 0 0 5px #000, inset 0 1px 2px rgba(255,255,255,.08), inset 0 -1px 2px rgba(0,0,0,.35)}

/* Dynamic Island */
.island{position:absolute;top:12px;left:50%;transform:translateX(-50%);width:126px;height:37px;background:#000;border-radius:19px;z-index:2}

/* Action Button (iPhone 15 Pro Max) */
.action-button{position:absolute;left:-3px;top:120px;width:10px;height:62px;background:linear-gradient(90deg, #A8A8A8 0%, #C0C0C0 30%, #D0D0D0 50%, #C0C0C0 70%, #A8A8A8 100%);border-radius:0 5px 5px 0;box-shadow:inset 2px 0 3px rgba(0,0,0,0.4), inset -1px 0 2px rgba(255,255,255,0.3), 1px 0 2px rgba(0,0,0,0.2)}

/* Volume buttons (left side) */
.btn-volume{position:absolute;left:-3px;width:10px;background:linear-gradient(90deg, #A8A8A8 0%, #C0C0C0 30%, #D0D0D0 50%, #C0C0C0 70%, #A8A8A8 100%);border-radius:0 5px 5px 0;box-shadow:inset 2px 0 3px rgba(0,0,0,0.4), inset -1px 0 2px rgba(255,255,255,0.3), 1px 0 2px rgba(0,0,0,0.2)}
.btn-volume.up{top:210px;height:70px}
.btn-volume.down{top:298px;height:70px}

/* Power button (right side) */
.btn-power{position:absolute;right:-3px;top:270px;width:10px;height:110px;background:linear-gradient(270deg, #A8A8A8 0%, #C0C0C0 30%, #D0D0D0 50%, #C0C0C0 70%, #A8A8A8 100%);border-radius:5px 0 0 5px;box-shadow:inset -2px 0 3px rgba(0,0,0,0.4), inset 1px 0 2px rgba(255,255,255,0.3), -1px 0 2px rgba(0,0,0,0.2)}

/* Antenna bands */
.antenna{position:absolute;width:16px;height:2px;background:linear-gradient(90deg, rgba(255,255,255,.5), rgba(0,0,0,.15));opacity:.6;border-radius:2px}
.antenna.lt{left:6px;top:86px;transform:rotate(90deg)}
.antenna.lb{left:6px;bottom:86px;transform:rotate(90deg)}
.antenna.rt{right:6px;top:140px;transform:rotate(90deg)}
.antenna.rb{right:6px;bottom:140px;transform:rotate(90deg)}

/* Dynamic Island subtle highlight */
.island::before{content:"";position:absolute;inset:2px;border-radius:17px;background:linear-gradient(180deg, rgba(255,255,255,.12), rgba(255,255,255,0));opacity:.35}

/* Status Bar */
.status{height:54px;margin-top:8px;display:flex;align-items:center;justify-content:space-between;padding:0 24px;font-weight:600;color:#fff;font-size:17px;letter-spacing:-.02em}
.status .right{display:flex;align-items:center;gap:6px}
.status .right img{height:13px;width:auto;display:block;filter:invert(1)}

/* App Content */
.header{padding:var(--space-4) var(--space-24) var(--space-4);display:flex;justify-content:space-between;align-items:center}
.logo{font-weight:600;font-size:32px;letter-spacing:-.01em;background:var(--brand-sheen);
  -webkit-background-clip:text;background-clip:text;-webkit-text-fill-color:transparent}

/* App wrapper */
.app-wrapper{display:flex;flex-direction:column;height:100%;position:relative}

/* Screen Management */
.app-screen{display:none;flex-direction:column;flex:1;overflow:hidden}
.app-screen.active{display:flex}

/* FEED SCREEN STYLES */
.section{padding:0 var(--space-24) var(--space-8)}
.h1{font-weight:700;font-size:28px;line-height:1.2;letter-spacing:-.01em}

/* Enhanced Chips */
.chips{display:flex;gap:8px;padding-top:10px;overflow-x:auto;-webkit-overflow-scrolling:touch;scrollbar-width:none}
.chips{margin-top:6px}
.chips::-webkit-scrollbar{display:none}
.chip{border:1px solid var(--ink-500);background:var(--ink-700);color:#fff;border-radius:var(--radius-pill);padding:var(--space-12) var(--space-16);font-size:13px;font-weight:500;white-space:nowrap;transition:all 0.2s ease;cursor:pointer}
.chip.is-active{border-color:var(--petrol-500);background:var(--petrol-500);color:#fff;font-weight:600;box-shadow:0 2px 8px rgba(0,163,163,.3)}
.chip:not(.is-active):hover{background:var(--ink-500);border-color:var(--ink-300)}

/* Inline heading */
.heading-inline{display:flex;align-items:baseline;gap:var(--space-12);margin:0 0 var(--space-8);flex-wrap:wrap}
.heading-inline .heading-main{font-size:28px;font-weight:700;color:#fff;letter-spacing:-0.01em;line-height:1.2}
.heading-sub-inline{font-size:16px;font-weight:600;color:var(--ink-300);letter-spacing:-.005em;line-height:1.2}

/* Feed */
.feed{padding:0 var(--space-24) 96px;overflow-y:auto;flex:1}

/* Enhanced Card */
.card{background:var(--ink-700);border:1px solid var(--ink-500);border-radius:var(--radius-card);overflow:hidden;transition:transform 0.2s ease;box-shadow:0 4px 12px rgba(0,0,0,0.15), 0 1px 3px rgba(0,0,0,0.1);margin-bottom:var(--space-16)}
.card:hover{transform:translateY(-2px);box-shadow:0 8px 25px rgba(0,0,0,0.2), 0 3px 8px rgba(0,0,0,0.15)}

.imgbox{position:relative;overflow:hidden;border-radius:var(--radius-card)}
.img{width:100%;height:440px;object-fit:cover;object-position:center 22%}
.imgbox::after{content:"";position:absolute;left:0;right:0;bottom:0;height:15%;
  background:linear-gradient(180deg,rgba(0,0,0,0) 0%,rgba(18,26,34,.2) 60%,rgba(0,0,0,.3) 100%)}

/* Heart/Save Icon */
.save-btn{position:absolute;top:16px;right:16px;width:36px;height:36px;border:none;border-radius:50%;background:rgba(255,255,255,.9);backdrop-filter:blur(10px);cursor:pointer;display:flex;align-items:center;justify-content:center;transition:all 0.2s ease;z-index:2}
.save-btn:hover{background:rgba(255,255,255,1);transform:scale(1.05)}
.save-btn.saved{background:rgba(255,92,92,.1);color:#ff5c5c}
.save-btn svg{width:18px;height:18px;color:inherit}

/* Best Fit CTA */
.size-cta{position:relative;display:flex;align-items:center;justify-content:space-between;gap:var(--space-12);width:100%;
  margin:var(--space-12) 0 10px;padding:var(--space-16) var(--space-24);border:none;border-radius:var(--space-24);color:#fff;
  background:linear-gradient(180deg, rgba(255,255,255,.08) 0%, rgba(255,255,255,0) 8%), var(--brand-sheen);
  font:700 15px/1 Inter;cursor:pointer;transform:translateZ(0);transition:all 0.2s ease;box-shadow:0 6px 20px rgba(0,163,163,0.3), 0 2px 6px rgba(0,0,0,0.1)}
.size-cta:hover{transform:translateY(-1px);box-shadow:0 8px 25px rgba(0,163,163,0.4), 0 3px 8px rgba(0,0,0,0.15)}
.size-cta .label{font:800 17px/1.1 Inter;letter-spacing:-.005em;display:flex;align-items:center;gap:var(--space-8)}
.size-cta .match{display:inline-flex;align-items:center;gap:var(--space-8);padding:var(--space-8) var(--space-16);border-radius:var(--radius-pill);
  background:rgba(255,255,255,.8);border:1px solid rgba(255,255,255,.95);color:#1F1F1F;font:600 13px/1 Inter;
  backdrop-filter:blur(12px);-webkit-backdrop-filter:blur(12px)}

/* Measuring tape icon */
.measure-icon{width:16px;height:16px;opacity:0.9}

.info{position:relative;margin-top:-10px;padding:var(--space-16) var(--space-16) var(--space-12)}
.divider{height:1px;background:rgba(255,255,255,.08);margin:8px 0 8px;border-radius:1px}

/* Metadata row */
.row{display:flex;align-items:center;justify-content:space-between;margin-bottom:var(--space-8);padding:0 var(--space-12) 0 var(--space-8)}
.left-meta{display:flex;align-items:center;gap:var(--space-8)}
.brand{font-size:12px;letter-spacing:.3px;color:var(--ink-300);font-weight:600}
.price{font-weight:700;font-size:17px;color:#fff}

/* Trust item */
.trust-item{display:flex;align-items:center;gap:var(--space-8);font-size:14px;color:var(--ink-300);font-weight:500}
.trust-item svg{width:16px;height:16px;color:#4ade80;position:relative;top:1px}

/* Summary pill */
.tip-summary{margin-top:var(--space-12);padding:var(--space-16);background:var(--petrol-100);border:1px solid var(--petrol-400);
  border-radius:var(--radius-btn);font-size:14px;color:var(--ink-900);box-shadow:0 2px 6px rgba(0,163,163,0.15), inset 0 1px 0 rgba(255,255,255,0.2)}

.shop-row{display:flex;justify-content:center;margin-top:10px;padding:0 var(--space-16)}
.shop-link{display:flex;align-items:center;justify-content:center;width:100%;min-height:44px;padding:var(--space-12) var(--space-16);
  background:var(--ink-700);border:1px solid var(--petrol-400);border-radius:var(--radius-btn);
  color:var(--petrol-400);text-decoration:none;font-weight:700;letter-spacing:-.01em;font-size:15px}
.shop-link:hover{background:var(--petrol-100);text-decoration:none}

.micro{color:var(--ink-300);font-size:14px;font-weight:500;margin-top:6px}

/* Expanded details */
.details{background:var(--ink-700);border:1px solid var(--ink-500);border-radius:var(--radius-card);padding:var(--space-8) var(--space-16) var(--space-6);transition:max-height .35s ease,opacity .25s ease;box-shadow:0 2px 8px rgba(0,0,0,0.1), inset 0 1px 0 rgba(255,255,255,0.05)}
.item{padding:var(--space-6) 0}
.item+ .item{border-top:1px solid var(--ink-500)}
.measure{font-size:14px;line-height:1.55;color:#fff}
.measure strong{font-size:15px;font-weight:700;color:#fff}
.measure .muted{color:var(--ink-300);font-weight:400}

/* Spec rows with delta badges (expanded state) */
.spec{display:flex;align-items:center;justify-content:space-between;padding:var(--space-8) 0}
.badge{display:inline-flex;align-items:center;justify-content:center;min-width:68px;font-size:14px;line-height:1;padding:var(--space-8) var(--space-12);border-radius:var(--radius-pill);background:var(--petrol-100);color:var(--petrol-600);font-weight:700;border:1px solid var(--petrol-400)}
.details .divider{height:1px;background:var(--ink-500);margin:4px 0;border-radius:1px}

/* Accent highlight for key references (subtle teal) */
.accent{color:var(--petrol-600);font-weight:600}

/* Inline advisory note (enhanced visibility) */
.details .advice-inline{margin:4px 0 2px;font-size:15px;line-height:1.4;color:var(--ink-300);font-weight:500}
.advice-next{margin-top:10px}
.details .advice-inline b{color:var(--petrol-600)}

/* Feed vs detail states */
.hidden{display:none}
.view-feed .details{display:none}
.view-detail .details{display:block}
/* Hide non-essential commerce/meta when expanded */
.view-detail .divider.main-divider,
.view-detail .row,
.view-detail .micro{display:none}
/* hide feed summary in expanded view */
.view-detail .tip-summary{display:none}
/* hide shop link in expanded view */
.view-detail .shop-row{display:none}
/* Tighten spacing above first line in details */
.view-detail .details{padding-top:4px}

/* CLOSET SCREEN STYLES */
/* Filters - Dark strip like original */
.filters{position:relative;z-index:4;background:var(--ink-900);padding:var(--space-10) var(--space-24);border-bottom:1px solid rgba(255,255,255,.08)}
.filters-content{display:flex;align-items:center;gap:var(--space-12);justify-content:space-between}
.filter-chips{display:flex;gap:var(--space-6);overflow-x:auto;-webkit-overflow-scrolling:touch;scrollbar-width:none;flex:1}
.filter-chips::-webkit-scrollbar{display:none}
.filter-chip{background:transparent;color:var(--ink-300);border-radius:var(--radius-pill);padding:var(--space-8) var(--space-14);font-size:13px;font-weight:500;white-space:nowrap;transition:all 0.15s ease;cursor:pointer;border:1px solid transparent}
.filter-chip.active{background:rgba(22,181,181,.15);color:var(--petrol-400);font-weight:600;border-color:var(--petrol-400)}
.filter-chip:not(.active):hover{background:rgba(255,255,255,.05);color:#fff}

/* View toggle */
.view-toggle{display:flex;background:var(--ink-700);border-radius:var(--radius-pill);padding:2px;border:1px solid var(--ink-500)}
.switch{width:32px;height:28px;border-radius:var(--radius-pill);background:transparent;border:none;color:var(--ink-300);cursor:pointer;transition:all 0.15s ease;display:flex;align-items:center;justify-content:center;padding:0}
.switch svg{width:16px;height:16px}
.switch.active{background:var(--ink-500);color:var(--petrol-400)}
.switch:not(.active):hover{color:#fff}

/* Content */
.content{flex:1;overflow-y:auto;padding:var(--space-16) var(--space-24) 96px}

/* Item cards */
.grid{display:grid;grid-template-columns:repeat(2,1fr);gap:var(--space-10)}
.list{display:grid;grid-template-columns:1fr;gap:var(--space-12)}

.closet-card{position:relative;overflow:hidden;border-radius:var(--radius-card);background:var(--ink-700);transition:all 0.3s cubic-bezier(0.4, 0, 0.2, 1);cursor:pointer;border:1px solid rgba(255,255,255,.04)}
.closet-card:hover{transform:translateY(-4px);box-shadow:0 20px 40px rgba(0,0,0,.3), 0 0 0 1px rgba(255,255,255,.08)}
.closet-card:active{transform:translateY(-2px)}
.closet-img{width:100%;height:240px;object-fit:cover;object-position:center;transition:transform 0.6s cubic-bezier(0.4, 0, 0.2, 1)}
.closet-card:hover .closet-img{transform:scale(1.04)}
.closet-img.tall{height:280px}

/* Gradient overlay */
.overlay{position:absolute;inset:0;background:linear-gradient(180deg,transparent 50%,rgba(11,15,20,.4) 75%,rgba(11,15,20,.9) 100%);opacity:0;transition:opacity 0.3s ease;pointer-events:none}
.closet-card:hover .overlay{opacity:1}

/* Info section */
.closet-info{position:absolute;bottom:0;left:0;right:0;padding:var(--space-14) var(--space-14) var(--space-16);background:linear-gradient(180deg,transparent,rgba(11,15,20,.95));transform:translateY(4px);transition:transform 0.3s cubic-bezier(0.4, 0, 0.2, 1)}
.closet-card:hover .closet-info{transform:translateY(0)}
.closet-brand{font:500 11px/1 Inter;letter-spacing:.08em;color:var(--canvas-0);opacity:0.95}
.closet-name{font:600 14px/1.3 Inter;margin-top:4px;color:#fff;letter-spacing:-.01em}

/* Size badge */
.size{position:absolute;top:var(--space-12);left:var(--space-12);padding:var(--space-6) var(--space-10);border-radius:var(--radius-btn);background:rgba(18,26,34,.75);backdrop-filter:blur(12px);-webkit-backdrop-filter:blur(12px);color:#fff;font:500 11px/1 Inter;border:1px solid rgba(255,255,255,.12);letter-spacing:.02em}

/* Tab bar */
.tabs{position:absolute;left:0;right:0;bottom:0;height:83px;background:rgba(11,15,20,.75);border-top:1px solid rgba(255,255,255,.08);
  backdrop-filter:blur(16px);-webkit-backdrop-filter:blur(16px);
  display:flex;justify-content:space-around;align-items:flex-start;padding-top:8px;padding-bottom:34px}
.tab{display:flex;flex-direction:column;align-items:center;gap:6px;text-decoration:none;color:var(--ink-300);font-size:11px;font-weight:500;transition:color 0.2s ease;cursor:pointer;background:none;border:none}
.tab.active{color:var(--petrol-400);font-weight:600}
.ico{width:28px;height:28px;display:block}

/* Modal */
.modal{position:fixed;inset:0;background:rgba(0,0,0,.85);display:none;align-items:center;justify-content:center;z-index:50;backdrop-filter:blur(20px);-webkit-backdrop-filter:blur(20px)}
.modal.open{display:flex;animation:fadeIn 0.2s ease}
@keyframes fadeIn{from{opacity:0}to{opacity:1}}

.sheet{width:92%;max-width:400px;background:var(--ink-700);border-radius:var(--radius-xl);overflow:hidden;box-shadow:0 50px 100px rgba(0,0,0,.5), 0 0 0 1px rgba(255,255,255,.05);animation:slideUp 0.3s cubic-bezier(0.34, 1.56, 0.64, 1)}
@keyframes slideUp{from{transform:translateY(20px);opacity:0}to{transform:translateY(0);opacity:1}}

.sheet .hero{position:relative;height:360px;overflow:hidden}
.sheet img{width:100%;height:100%;object-fit:cover;object-position:center}
.sheet .close-x{position:absolute;top:var(--space-12);right:var(--space-12);width:32px;height:32px;border-radius:50%;background:rgba(18,26,34,.75);backdrop-filter:blur(12px);border:1px solid rgba(255,255,255,.1);display:flex;align-items:center;justify-content:center;cursor:pointer;transition:all 0.2s ease}
.sheet .close-x:hover{background:rgba(18,26,34,.9);transform:scale(1.1)}
.sheet .close-x svg{width:16px;height:16px;color:#fff}

.sheet .body{padding:var(--space-20) var(--space-24) var(--space-24);color:#fff}
.sheet .meta-row{display:flex;align-items:baseline;justify-content:space-between;margin-bottom:var(--space-16)}
.sheet h3{font:700 22px/1.2 Inter;color:#fff;letter-spacing:-.02em}
.meta{color:var(--ink-300);font-size:13px;font-weight:500;letter-spacing:.02em}
.sheet .size-badge{display:inline-flex;align-items:center;padding:var(--space-6) var(--space-12);border-radius:var(--radius-pill);background:rgba(22,181,181,.15);color:var(--petrol-400);font:600 13px/1 Inter;border:1px solid var(--petrol-400)}

.why{margin-top:var(--space-16);background:rgba(255,255,255,.03);border:1px solid rgba(255,255,255,.08);border-radius:var(--radius-card);padding:var(--space-16);color:var(--ink-300);font-size:14px;line-height:1.5}
.why strong{color:#fff;font-weight:600}

.cta{margin-top:var(--space-20);display:flex;align-items:center;justify-content:center}
.btn-primary{display:inline-flex;align-items:center;justify-content:center;gap:var(--space-8);padding:var(--space-16) var(--space-32);border-radius:var(--radius-btn);font:700 16px/1 Inter;cursor:pointer;transition:all 0.2s ease;letter-spacing:-.01em;color:#fff;border:none;background:linear-gradient(180deg, rgba(255,255,255,.08) 0%, rgba(255,255,255,0) 8%), var(--brand-sheen);box-shadow:0 10px 24px rgba(0,163,163,.25);width:100%}
.btn-primary:hover{transform:translateY(-1px);box-shadow:0 12px 28px rgba(0,163,163,.35)}
.btn-primary:active{transform:scale(.98)}
</style>
</head>
<body class="view-feed">
  <div class="phone">
    <div class="action-button"></div>
    <div class="btn-volume up"></div>
    <div class="btn-volume down"></div>
    <div class="btn-power"></div>
    <div class="antenna lt"></div>
    <div class="antenna lb"></div>
    <div class="antenna rt"></div>
    <div class="antenna rb"></div>
    <div class="screen">
      <div class="island"></div>
      <div class="app-wrapper">
        <div class="status">
          <div>9:41</div>
          <div class="right">
            <img src="Cellular Connection.svg" alt="cell"/>
            <img src="Wifi.svg" alt="wifi"/>
            <img src="Battery.svg" alt="battery"/>
          </div>
          <button id="themeBtn" class="theme-toggle" title="Toggle theme">Light</button>
        </div>

        <div class="header">
          <div class="logo">Freestyle</div>
        </div>

        <!-- FEED SCREEN -->
      <div id="feedScreen" class="app-screen active">
        <div class="section">
          <div class="heading-inline">
            <h1 class="heading-main">Explore</h1>
            <span class="heading-sub-inline">Curated based on your sizes.</span>
          </div>

          <div class="chips">
            <button class="chip is-active">Wedding guest</button>
            <button class="chip">Midi</button>
            <button class="chip">Under $250</button>
            <button class="chip">Quick ship</button>
            <button class="chip">New in</button>
          </div>
        </div>

        <div class="feed">
          <!-- Card 1: Anthropologie Fleur (Emma owns) -->
          <div class="card">
            <div class="imgbox">
              <img class="img" src="https://images.urbndata.com/is/image/Anthropologie/4130608080008_526_b?$a15-pdp-detail-shot$&fit=constrain&fmt=webp&qlt=80&wid=1314" alt="Anthropologie Fleur Strapless Dress"/>
              
              <!-- Peer match indicator -->
              <div class="peer-badge" style="position:absolute;top:16px;left:16px;background:rgba(255,255,255,0.95);backdrop-filter:blur(10px);border-radius:12px;padding:8px 12px;display:flex;align-items:center;gap:8px;box-shadow:0 2px 8px rgba(0,0,0,0.1);">
                <span style="width:24px;height:24px;background:linear-gradient(135deg,#00A3A3,#16B5B5);border-radius:50%;display:flex;align-items:center;justify-content:center;color:white;font-weight:600;font-size:12px;">✓</span>
                <span style="font-size:13px;font-weight:600;color:#0B0F14;">Match owns this</span>
              </div>
              
              <!-- Save/Heart button -->
              <button class="save-btn" id="saveBtn1" title="Save to favorites">
                <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                  <path d="M20.84 4.61a5.5 5.5 0 0 0-7.78 0L12 5.67l-1.06-1.06a5.5 5.5 0 0 0-7.78 7.78l1.06 1.06L12 21.23l7.78-7.78 1.06-1.06a5.5 5.5 0 0 0 0-7.78z"/>
                </svg>
              </button>
            </div>

            <div class="info">
              <!-- Enhanced CTA with peer match -->
              <button class="size-cta" id="sizeCta1" aria-expanded="false">
                <span class="label">
                  <span style="display:flex;align-items:center;gap:6px;">
                    <span style="width:20px;height:20px;background:#00A3A3;border-radius:50%;display:flex;align-items:center;justify-content:center;color:white;font-weight:600;font-size:10px;">✓</span>
                    <span>Size <strong>S</strong> • 98% match</span>
                  </span>
                </span>
                <span class="match" id="match1" style="background:rgba(0,163,163,0.1);color:#00A3A3;border-color:#00A3A3;">View fit</span>
              </button>

              <div class="divider main-divider"></div>

              <div class="row">
                <div class="left-meta">
                  <div class="brand">ANTHROPOLOGIE</div>
                  <span style="color:#c4c4c4;">|</span>
                  <div class="price">$228.00</div>
                </div>
                <div class="trust-item">
                  <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                    <path d="M20 6L9 17l-5-5"/>
                  </svg>
                  Free returns
                </div>
              </div>

              <!-- Expanded details (Peer Match Focus) -->
              <div class="details hidden" id="fitDetails1">
                <div class="item">
                  <p class="advice-inline">You both wear <strong class="accent">Bryson 2</strong> <span class="muted">(perfect fit)</span></p>
                </div>
                
                <!-- Body Comparison -->
                <div class="spec">
                  <span class="measure"><strong>Height —</strong> Both 5'6"</span>
                  <span class="badge" style="background:#E0F7F7;color:#00A3A3;border-color:#00A3A3;">Match</span>
                </div>
                <div class="divider"></div>
                
                <div class="spec">
                  <span class="measure"><strong>Bust —</strong> Both 34"</span>
                  <span class="badge" style="background:#E0F7F7;color:#00A3A3;border-color:#00A3A3;">Match</span>
                </div>
                <div class="divider"></div>
                
                <div class="spec">
                  <span class="measure"><strong>Waist —</strong> Both 26"</span>
                  <span class="badge" style="background:#E0F7F7;color:#00A3A3;border-color:#00A3A3;">Match</span>
                </div>
                <div class="divider"></div>
                
                <div class="spec">
                  <span class="measure"><strong>Hips —</strong> <span class="muted">You: 37" • Match: 36"</span></span>
                  <span class="badge">-1"</span>
                </div>
                
                <!-- Match Feedback -->
                <div style="margin-top:10px;padding:10px 12px;background:rgba(0,163,163,0.08);border-radius:12px;border:1px solid rgba(0,163,163,0.15);display:flex;align-items:center;gap:10px;">
                  <div style="width:28px;height:28px;background:#00A3A3;border-radius:50%;display:flex;align-items:center;justify-content:center;flex-shrink:0;">
                    <svg width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="white" stroke-width="3">
                      <path d="M7 13l3 3 7-7"/>
                    </svg>
                  </div>
                  <div style="flex:1;">
                    <p style="font-size:14px;color:#fff;margin:0;"><strong>Match feedback:</strong> "Works great, elastic helps"</p>
                  </div>
                </div>
                
                <!-- View Closet CTA -->
                <button onclick="showMatchCloset()" style="margin-top:12px;width:100%;padding:12px 20px;background:linear-gradient(180deg, rgba(255,255,255,.08) 0%, rgba(255,255,255,0) 8%), #00A3A3;color:white;border:none;border-radius:24px;font-weight:700;font-size:15px;cursor:pointer;transition:all 0.2s ease;box-shadow:0 6px 20px rgba(0,163,163,0.3);">
                  View match's full closet →
                </button>
              </div>

              <div class="shop-row">
                <a class="shop-link" href="https://www.anthropologie.com/shop/the-fleur-strapless-satin-maxi-slip-dress4?category=dresses&color=526&type=STANDARD&quantity=1" target="_blank" rel="noopener noreferrer">Shop S</a>
              </div>
            </div>
          </div>

          <!-- Card 2: Original Anthropologie Jocelyn Dress -->
          <div class="card">
            <div class="imgbox">
              <img class="img" src="https://images.urbndata.com/is/image/Anthropologie/4130652010091_256_b?$redesign-zoom-5x$" alt="Anthropologie Jocelyn Dress"/>
              
              <!-- Save/Heart button -->
              <button class="save-btn" id="saveBtn2" title="Save to favorites">
                <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                  <path d="M20.84 4.61a5.5 5.5 0 0 0-7.78 0L12 5.67l-1.06-1.06a5.5 5.5 0 0 0-7.78 7.78l1.06 1.06L12 21.23l7.78-7.78 1.06-1.06a5.5 5.5 0 0 0 0-7.78z"/>
                </svg>
              </button>
            </div>

            <div class="info">
              <!-- Size guide based CTA -->
              <button class="size-cta" id="sizeCta2" aria-expanded="false">
                <span class="label">
                  <svg class="measure-icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                    <path d="M3 7v10a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2V9a2 2 0 0 0-2-2H5a2 2 0 0 0-2 2z"/>
                    <line x1="8" y1="1" x2="8" y2="4"/>
                    <line x1="16" y1="1" x2="16" y2="4"/>
                  </svg>
                  Best Fit: <strong>S</strong>
                </span>
                <span class="match" id="match2">Fit details</span>
              </button>

              <div class="divider main-divider"></div>

              <div class="row">
                <div class="left-meta">
                  <div class="brand">ANTHROPOLOGIE</div>
                  <span style="color:#c4c4c4;">|</span>
                  <div class="price">$168.00</div>
                </div>
                <div class="trust-item">
                  <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                    <path d="M20 6L9 17l-5-5"/>
                  </svg>
                  Free returns
                </div>
              </div>

              <!-- Expanded details -->
              <div class="details hidden" id="fitDetails2">
                <div class="item">
                  <p class="advice-inline">Compared to your size: <strong class="accent">Bryson 2</strong> <span class="muted">(perfect fit)</span></p>
                </div>
                <div class="spec">
                  <span class="measure"><strong>Bust —</strong> Looser <span class="muted">(35–36″ vs 34″)</span></span>
                  <span class="badge">+1–2″</span>
                </div>
                <div class="divider"></div>
                <div class="spec">
                  <span class="measure"><strong>Waist —</strong> Looser <span class="muted">(27–28″ vs 26″)</span></span>
                  <span class="badge">+1–2″</span>
                </div>
                <div class="divider"></div>
                <div class="spec">
                  <span class="measure"><strong>Hips —</strong> Matches <span class="muted">(37–38″ vs 37″)</span></span>
                  <span class="badge">≈</span>
                </div>
                <p class="advice-inline advice-next">Prefer a slimmer look? XS will match the bust (33–34″) and waist (25–26″) but feel tight at hips (35–36″ vs your 37″)</p>
              </div>

              <!-- Feed summary -->
              <div class="tip-summary" id="fitSummary2">
                <div>Based on your <strong>Bryson 2</strong> — slightly roomier in bust & waist, perfect hips.</div>
              </div>
              <div class="shop-row">
                <a class="shop-link" href="https://www.anthropologie.com/shop/the-jocelyn-sleeveless-slip-midi-dress-by-maeve?category=top-rated-dresses&color=256&type=STANDARD&quantity=1" target="_blank" rel="noopener noreferrer">Shop S</a>
              </div>
            </div>
          </div>
        </div>
      </div>

      <!-- CLOSET SCREEN -->
      <div id="closetScreen" class="app-screen">
        <div class="section">
          <h1 class="heading-main" style="font-size:28px">Your Closet</h1>
        </div>
        
        <div class="filters">
          <div class="filters-content">
            <div class="filter-chips" id="chips">
              <button class="filter-chip active" data-filter="all">All</button>
              <button class="filter-chip" data-filter="top">Tops</button>
              <button class="filter-chip" data-filter="bottom">Bottoms</button>
              <button class="filter-chip" data-filter="dress">Dresses</button>
            </div>
            <div class="view-toggle">
              <button class="switch" id="listBtn" title="List view">
                <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                  <line x1="8" y1="6" x2="21" y2="6"></line>
                  <line x1="8" y1="12" x2="21" y2="12"></line>
                  <line x1="8" y1="18" x2="21" y2="18"></line>
                  <line x1="3" y1="6" x2="3.01" y2="6"></line>
                  <line x1="3" y1="12" x2="3.01" y2="12"></line>
                  <line x1="3" y1="18" x2="3.01" y2="18"></line>
                </svg>
              </button>
              <button class="switch active" id="gridBtn" title="Grid view">
                <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                  <rect x="3" y="3" width="7" height="7"></rect>
                  <rect x="14" y="3" width="7" height="7"></rect>
                  <rect x="14" y="14" width="7" height="7"></rect>
                  <rect x="3" y="14" width="7" height="7"></rect>
                </svg>
              </button>
            </div>
          </div>
        </div>

        <div class="content">
          <div id="items" class="grid">
            <!-- Items will be dynamically generated from mockup data -->
          </div>
        </div>
      </div>

      <!-- MATCH CLOSET SCREEN -->
      <div id="matchClosetScreen" class="app-screen">
        <!-- Back button header -->
        <div style="padding:16px 24px;display:flex;align-items:center;gap:12px;border-bottom:1px solid rgba(255,255,255,0.08);">
          <button onclick="backToFeed()" style="background:none;border:none;color:#00A3A3;padding:0;cursor:pointer;">
            <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
              <line x1="19" y1="12" x2="5" y2="12"></line>
              <polyline points="12 19 5 12 12 5"></polyline>
            </svg>
          </button>
          <h2 style="font-size:20px;font-weight:600;color:#fff;letter-spacing:-0.01em;">Match's Closet</h2>
        </div>
        
        <!-- Match stats bar -->
        <div style="background:#232A32;padding:16px 24px;border-bottom:1px solid rgba(255,255,255,0.08);">
          <div style="font-size:13px;color:#6A7683;margin-bottom:8px;">Based on Bryson 2 match</div>
          <div style="display:flex;align-items:center;gap:20px;">
            <span style="color:#fff;font-weight:600;font-size:15px;">5'6" • 34/26/36</span>
            <span style="color:#00A3A3;font-size:14px;">98% match</span>
          </div>
          <div style="display:flex;gap:24px;margin-top:12px;padding-top:12px;border-top:1px solid rgba(255,255,255,0.08);">
            <div style="font-size:13px;">
              <span style="color:#fff;font-weight:600;">15</span>
              <span style="color:#6A7683;"> items</span>
            </div>
            <div style="font-size:13px;">
              <span style="color:#fff;font-weight:600;">8</span>
              <span style="color:#6A7683;"> brands</span>
            </div>
            <div style="font-size:13px;">
              <span style="color:#6A7683;">Typical: </span>
              <span style="color:#fff;font-weight:600;">Size 2/S</span>
            </div>
          </div>
        </div>
        
        <!-- Match's items grid -->
        <div style="padding:16px 24px 96px;overflow-y:auto;flex:1;">
          <div style="display:grid;grid-template-columns:repeat(2,1fr);gap:10px;" id="emmaClosetGrid">
            <!-- Emma's closet items will be loaded dynamically here -->
          </div>
        </div>
      </div>
      </div><!-- End app-wrapper -->

      <!-- Tab bar -->
      <div class="tabs">
        <button class="tab" data-screen="find">
          <svg class="ico" viewBox="0 0 256 256" aria-hidden="true"><path fill="currentColor" d="M241,150.65s0,0,0-.05a51.33,51.33,0,0,0-2.53-5.9L196.93,50.18a12,12,0,0,0-2.5-3.65,36,36,0,0,0-50.92,0A12,12,0,0,0,140,55V76H116V55a12,12,0,0,0-3.51-8.48,36,36,0,0,0-50.92,0,12,12,0,0,0-2.5,3.65L17.53,144.7A51.33,51.33,0,0,0,15,150.6s0,0,0,.05A52,52,0,1,0,116,168V100h24v68a52,52,0,1,0,101-17.35ZM80,62.28a12,12,0,0,1,12-1.22v63.15a51.9,51.9,0,0,0-35.9-7.62ZM64,196a28,28,0,1,1,28-28A28,28,0,0,1,64,196ZM164,61.06a12.06,12.06,0,0,1,12,1.22l23.87,54.31a51.9,51.9,0,0,0-35.9,7.62ZM192,196a28,28,0,1,1,28-28A28,28,0,0,1,192,196Z"/></svg>
          <span>Find</span>
        </button>
        <button class="tab active" data-screen="feed">
          <svg class="ico" viewBox="0 0 256 256" aria-hidden="true"><path fill="currentColor" d="M225.24,174.74a12,12,0,0,1-1.58,16.89C205.49,206.71,189.06,212,174.15,212c-19.76,0-36.86-9.29-51.88-17.44-25.06-13.62-44.86-24.37-74.61.3a12,12,0,1,1-15.32-18.48c42.25-35,75-17.23,101.39-2.92,25.06,13.61,44.86,24.37,74.61-.3A12,12,0,0,1,225.24,174.74Zm-16.9-57.59c-29.75,24.67-49.55,13.91-74.61.3-26.35-14.3-59.14-32.11-101.39,2.92a12,12,0,0,0,15.32,18.48c29.75-24.67,49.55-13.92,74.61-.3,15,8.15,32.12,17.44,51.88,17.44,14.91,0,31.34-5.29,49.51-20.36a12,12,0,0,0-15.32-18.48ZM47.66,82.84c29.75-24.67,49.55-13.92,74.61-.3,15,8.15,32.12,17.44,51.88,17.44,14.91,0,31.34-5.29,49.51-20.36a12,12,0,0,0-15.32-18.48c-29.75,24.67-49.55,13.92-74.61.3-26.35-14.3-59.14-32.11-101.39,2.93A12,12,0,1,0,47.66,82.84Z"/></svg>
          <span>Feed</span>
        </button>
        <button class="tab" data-screen="closet">
          <svg class="ico" viewBox="0 0 256 256" aria-hidden="true"><path fill="currentColor" d="M244,168,148,96l19.2-14.4A12,12,0,0,0,172,72a44,44,0,0,0-87.66-5.48,12,12,0,1,0,23.82,3,20,20,0,0,1,39.09-2.92L121,86.24c-.15.1-.29.21-.43.32L12,168a20,20,0,0,0,12,36H232a20,20,0,0,0,12-36ZM36,180l92-69,92,69Z"/></svg>
          <span>Closet</span>
        </button>
        <button class="tab" data-screen="profile">
          <svg class="ico" viewBox="0 0 256 256" aria-hidden="true"><path fill="currentColor" d="M234.38,210a123.36,123.36,0,0,0-60.78-53.23,76,76,0,1,0-91.2,0A123.36,123.36,0,0,0,21.62,210a12,12,0,1,0,20.77,12c18.12-31.32,50.12-50,85.61-50s67.49,18.69,85.61,50a12,12,0,0,0,20.77-12ZM76,96a52,52,0,1,1,52,52A52.06,52.06,0,0,1,76,96Z"/></svg>
          <span>Profile</span>
        </button>
      </div>
    </div>

    <!-- Modal preview -->
    <div id="modal" class="modal" role="dialog" aria-modal="true" aria-label="Garment details">
      <div class="sheet">
        <div class="hero">
          <img id="mImg" alt="">
          <button class="close-x" id="closeBtn" aria-label="Close">
            <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
              <line x1="18" y1="6" x2="6" y2="18"></line>
              <line x1="6" y1="6" x2="18" y2="18"></line>
            </svg>
          </button>
        </div>
        <div class="body">
          <div class="meta-row">
            <div>
              <h3 id="mTitle">Title</h3>
              <div id="mBrand" class="meta">Brand</div>
            </div>
            <span id="mSize" class="size-badge">Size</span>
          </div>
          <div class="why">
            <strong>Fit details:</strong>
            <div id="mWhy">We'll compare this to similar items in your closet and show chest/waist/hips context here.</div>
          </div>
          <div class="cta">
            <button class="btn-primary">
              View full details
              <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                <line x1="5" y1="12" x2="19" y2="12"></line>
                <polyline points="12 5 19 12 12 19"></polyline>
              </svg>
            </button>
          </div>
        </div>
      </div>
    </div>
  </div>

<script>
// Screen navigation
const screens = {
  feed: document.getElementById('feedScreen'),
  closet: document.getElementById('closetScreen'),
  matchCloset: document.getElementById('matchClosetScreen')
};

const tabs = document.querySelectorAll('.tab');

// Tab navigation
tabs.forEach(tab => {
  tab.addEventListener('click', () => {
    const screenName = tab.dataset.screen;
    
    // Handle screens we have
    if (screenName === 'feed' || screenName === 'closet') {
      // Update active tab
      tabs.forEach(t => t.classList.remove('active'));
      tab.classList.add('active');
      
      // Show correct screen
      Object.values(screens).forEach(s => s.classList.remove('active'));
      if (screens[screenName]) {
        screens[screenName].classList.add('active');
      }
    }
  });
});

// Navigate to match closet
function showMatchCloset() {
  // Hide all screens
  Object.values(screens).forEach(s => s.classList.remove('active'));
  // Show match closet
  screens.matchCloset.classList.add('active');
  // Remove active tab (we're in a sub-screen)
  tabs.forEach(t => t.classList.remove('active'));
  
  // Load Emma's closet items dynamically
  loadEmmaCloset();
}

// Load Emma's closet items
function loadEmmaCloset() {
  const matchClosetGrid = document.getElementById('emmaClosetGrid');
  if (!matchClosetGrid || !MOCKUP_DATA.sizeTwins || !MOCKUP_DATA.sizeTwins[0]) return;
  
  const emma = MOCKUP_DATA.sizeTwins[0]; // Emma is the first size twin
  matchClosetGrid.innerHTML = ''; // Clear existing hardcoded items
  
  // Generate cards for Emma's closet items
  emma.closet.forEach(item => {
    const card = document.createElement('div');
    card.style.cssText = 'position:relative;border-radius:16px;overflow:hidden;background:#232A32;border:1px solid rgba(255,255,255,0.04);';
    
    // Get appropriate image based on item
    let imageUrl = '';
    if (item.id === 'emma_bryson') {
      imageUrl = 'https://media.thereformation.com/image/upload/f_auto,q_auto:eco,dpr_2.0/w_500/PRD-SFCC/1312619/MYKONOS/1312619.2.MYKONOS?_s=RAABAB0';
    } else if (item.id === 'emma_anthropologie') {
      imageUrl = 'https://images.anthropologie.com/is/image/Anthropologie/58124185_001_b?$a15-pdp-detail-shot$&fit=constrain&fmt=webp&qlt=80&wid=720';
    }
    
    card.innerHTML = `
      <img src="${imageUrl}" style="width:100%;height:220px;object-fit:cover;">
      <div style="position:absolute;top:12px;left:12px;padding:6px 10px;background:rgba(18,26,34,0.75);backdrop-filter:blur(12px);color:#fff;font-size:11px;font-weight:500;border-radius:8px;border:1px solid rgba(255,255,255,0.12);">${item.size}</div>
      <div style="padding:12px;">
        <div style="font-size:11px;color:#6A7683;letter-spacing:0.5px;">${item.brand.toUpperCase()}</div>
        <div style="font-size:13px;color:#fff;margin-top:4px;">${item.name}</div>
        ${item.fit !== 'perfect' ? `<div style="font-size:11px;color:#FF6B5A;margin-top:4px;">${item.fit}</div>` : ''}
      </div>
    `;
    
    matchClosetGrid.appendChild(card);
  });
}

// Navigate back to feed
function backToFeed() {
  // Hide all screens
  Object.values(screens).forEach(s => s.classList.remove('active'));
  // Show feed
  screens.feed.classList.add('active');
  // Activate feed tab
  tabs.forEach(t => t.classList.remove('active'));
  document.querySelector('.tab[data-screen="feed"]').classList.add('active');
}

// Card 1 expansion (Fleur dress with Emma)
const sizeCta1 = document.getElementById('sizeCta1');
const match1 = document.getElementById('match1');
const fitDetails1 = document.getElementById('fitDetails1');
const fitSummary1 = document.getElementById('fitSummary1');
const card1 = sizeCta1?.closest('.card');

if(sizeCta1) {
  sizeCta1.addEventListener('click', () => {
    const isExpanded = card1.classList.contains('view-detail');
    if(isExpanded) {
      card1.classList.remove('view-detail');
      card1.classList.add('view-feed');
      sizeCta1.setAttribute('aria-expanded', 'false');
      match1.textContent = 'View fit';
    } else {
      card1.classList.remove('view-feed');
      card1.classList.add('view-detail');
      sizeCta1.setAttribute('aria-expanded', 'true');
      match1.textContent = 'Hide fit';
    }
  });
}

// Card 2 expansion (Jocelyn dress)
const sizeCta2 = document.getElementById('sizeCta2');
const match2 = document.getElementById('match2');
const fitDetails2 = document.getElementById('fitDetails2');
const fitSummary2 = document.getElementById('fitSummary2');
const card2 = sizeCta2?.closest('.card');

if(sizeCta2) {
  sizeCta2.addEventListener('click', () => {
    const isExpanded = card2.classList.contains('view-detail');
    if(isExpanded) {
      card2.classList.remove('view-detail');
      card2.classList.add('view-feed');
      sizeCta2.setAttribute('aria-expanded', 'false');
      match2.textContent = 'Fit details';
    } else {
      card2.classList.remove('view-feed');
      card2.classList.add('view-detail');
      sizeCta2.setAttribute('aria-expanded', 'true');
      match2.textContent = 'Hide details';
    }
  });
}

// Generate closet item cards from data
function generateClosetCard(item) {
  return `
    <article class="closet-card" data-category="${item.category}" data-name="${item.name}" data-size="${item.size}" data-id="${item.id}">
      <img class="closet-img ${item.category === 'dress' ? 'tall' : ''}" src="${item.image}" alt="${item.name}">
      <span class="size">${item.size}</span>
      <div class="overlay"></div>
      <div class="closet-info">
        <div class="closet-brand">${item.brand.toUpperCase()}</div>
        <div class="closet-name">${item.name}</div>
      </div>
    </article>
  `;
}

// Initialize the closet
document.addEventListener('DOMContentLoaded', function() {
  const items = document.getElementById('items');
  
  // Check if MOCKUP_DATA exists
  if (typeof MOCKUP_DATA !== 'undefined' && MOCKUP_DATA.closet) {
    // Generate cards for each closet item
    MOCKUP_DATA.closet.forEach(item => {
      items.innerHTML += generateClosetCard(item);
    });
    console.log('Closet initialized with', MOCKUP_DATA.closet.length, 'items');
  } else {
    // Fallback data if mockup-data.js is not loaded
    const fallbackItems = [
      {id: 'bryson_dress', name: 'Bryson Dress', brand: 'Reformation', size: '2', category: 'dress', image: 'https://media.thereformation.com/image/upload/f_auto,q_auto:eco,dpr_2.0/w_500/PRD-SFCC/1312619/MYKONOS/1312619.2.MYKONOS?_s=RAABAB0'},
      {id: 'alexis_dress', name: 'Alexis Midi Dress', brand: 'Alexis', size: 'S', category: 'dress', image: 'https://alexis.com/cdn/shop/products/ALEXIS-Bellona-Dress-White_1080x.jpg?v=1678745158'}
    ];
    fallbackItems.forEach(item => {
      items.innerHTML += generateClosetCard(item);
    });
  }
});

// View toggle (list vs grid)
const itemsContainer = document.getElementById('items');
const listBtn = document.getElementById('listBtn');
const gridBtn = document.getElementById('gridBtn');

listBtn?.addEventListener('click',()=>{
  listBtn.classList.add('active');
  gridBtn.classList.remove('active');
  itemsContainer.className='list';
});

gridBtn?.addEventListener('click',()=>{
  gridBtn.classList.add('active');
  listBtn.classList.remove('active');
  itemsContainer.className='grid';
});

// Filter chips
const filterChips = document.getElementById('chips');
filterChips?.addEventListener('click', (e)=>{
  const btn = e.target.closest('.filter-chip');
  if(!btn) return;
  filterChips.querySelectorAll('.filter-chip').forEach(c=>c.classList.remove('active'));
  btn.classList.add('active');
  const filter = btn.dataset.filter;
  document.querySelectorAll('#items .closet-card').forEach(card=>{
    const match = filter==='all' || card.dataset.category===filter;
    card.style.display = match ? '' : 'none';
  });
});

// Modal functionality
const modal = document.getElementById('modal');
const mImg = document.getElementById('mImg');
const mTitle = document.getElementById('mTitle');
const mBrand = document.getElementById('mBrand');
const mSize = document.getElementById('mSize');
const mWhy = document.getElementById('mWhy');
const closeBtn = document.getElementById('closeBtn');

document.getElementById('items')?.addEventListener('click',(e)=>{
  const card = e.target.closest('.closet-card');
  if(!card) return;
  
  const imgEl = card.querySelector('img');
  mImg.src = imgEl.src; 
  mImg.alt = imgEl.alt;
  mTitle.textContent = card.dataset.name;
  mBrand.textContent = card.querySelector('.closet-brand').textContent;
  mSize.textContent = card.dataset.size;
  
  modal.classList.add('open');
});

modal?.addEventListener('click',(e)=>{ 
  if(e.target===modal) modal.classList.remove('open'); 
});

closeBtn?.addEventListener('click',()=> modal.classList.remove('open'));

// Save button functionality
const saveBtn1 = document.getElementById('saveBtn1');
if(saveBtn1) {
  saveBtn1.addEventListener('click', (e) => {
    e.preventDefault();
    saveBtn1.classList.toggle('saved');
    const isSaved = saveBtn1.classList.contains('saved');
    saveBtn1.title = isSaved ? 'Remove from favorites' : 'Save to favorites';
    
    // Update heart icon
    const svg = saveBtn1.querySelector('svg');
    if(isSaved) {
      svg.innerHTML = '<path d="M20.84 4.61a5.5 5.5 0 0 0-7.78 0L12 5.67l-1.06-1.06a5.5 5.5 0 0 0-7.78 7.78l1.06 1.06L12 21.23l7.78-7.78 1.06-1.06a5.5 5.5 0 0 0 0-7.78z" fill="currentColor"/>';
    } else {
      svg.innerHTML = '<path d="M20.84 4.61a5.5 5.5 0 0 0-7.78 0L12 5.67l-1.06-1.06a5.5 5.5 0 0 0-7.78 7.78l1.06 1.06L12 21.23l7.78-7.78 1.06-1.06a5.5 5.5 0 0 0 0-7.78z" fill="none" stroke="currentColor" stroke-width="2"/>';
    }
  });
}

const saveBtn2 = document.getElementById('saveBtn2');
if(saveBtn2) {
  saveBtn2.addEventListener('click', (e) => {
    e.preventDefault();
    saveBtn2.classList.toggle('saved');
    const isSaved = saveBtn2.classList.contains('saved');
    saveBtn2.title = isSaved ? 'Remove from favorites' : 'Save to favorites';
    
    // Update heart icon
    const svg = saveBtn2.querySelector('svg');
    if(isSaved) {
      svg.innerHTML = '<path d="M20.84 4.61a5.5 5.5 0 0 0-7.78 0L12 5.67l-1.06-1.06a5.5 5.5 0 0 0-7.78 7.78l1.06 1.06L12 21.23l7.78-7.78 1.06-1.06a5.5 5.5 0 0 0 0-7.78z" fill="currentColor"/>';
    } else {
      svg.innerHTML = '<path d="M20.84 4.61a5.5 5.5 0 0 0-7.78 0L12 5.67l-1.06-1.06a5.5 5.5 0 0 0-7.78 7.78l1.06 1.06L12 21.23l7.78-7.78 1.06-1.06a5.5 5.5 0 0 0 0-7.78z" fill="none" stroke="currentColor" stroke-width="2"/>';
    }
  });
}

// Theme toggle logic (persisted)
(function(){
  const btn = document.getElementById('themeBtn');
  if(!btn) return;
  const KEY = 'freestyle-theme';
  function apply(theme){
    document.body.classList.toggle('theme-light', theme === 'light');
    btn.textContent = theme === 'light' ? 'Dark' : 'Light';
  }
  let theme = localStorage.getItem(KEY);
  if(!theme){
    theme = window.matchMedia('(prefers-color-scheme: light)').matches ? 'light' : 'dark';
  }
  apply(theme);
  btn.addEventListener('click', ()=>{
    theme = (theme === 'light') ? 'dark' : 'light';
    localStorage.setItem(KEY, theme);
    apply(theme);
  });
})();
</script>

</body>
</html>